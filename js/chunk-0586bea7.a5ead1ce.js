(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0586bea7"],{1348:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.apply?r("div",{staticClass:"box clearfix"},[r("div",{staticClass:"registerDiv"},[t._m(0),r("div",{staticClass:"registerForm"},[r("AccountRegisterForm",{on:{"on-success":t.handleRegister}})],1)])]):r("div",{staticClass:"container activation hover"},[r("Tooltip",{attrs:{content:"Return to Home",placement:"bottom"}},[r("Icon",{attrs:{type:"md-checkmark-circle-outline",size:"30"}}),r("h1",{staticStyle:{display:"inline"},on:{click:function(e){return t.$router.replace({name:"home"})}}},[t._v(" "+t._s(t.message))])],1)],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"registerSwitchDiv"},[r("div",{staticClass:"accountRegister"},[r("div",{staticClass:"selectedType"},[t._v("Register Account")])])])}],i=r("7c15"),o=r("29f5"),c={components:{AccountRegisterForm:o["a"]},data:function(){return{apply:!0,message:""}},methods:{handleRegister:function(){this.apply=!1,this.message="Success, check your email for activation"}},mounted:function(){var t=this;this.$route.query.token&&i["a"].verifyEmail(this.$route.query.token).then((function(e){t.apply=!1,t.message="You have activated"})).catch((function(e){t.$Message.error(e.message)}))}},n=c,l=(r("83cd"),r("2877")),u=Object(l["a"])(n,a,s,!1,null,"2a8b75fd",null);e["default"]=u.exports},"29f5":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"center"},[r("Form",{ref:"registerForm",attrs:{model:t.registerForm,rules:t.registerRules,"label-position":"right"}},[r("FormItem",{attrs:{prop:"username",label:"Username"}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"Your login handler"},model:{value:t.registerForm.username,callback:function(e){t.$set(t.registerForm,"username",e)},expression:"registerForm.username"}})],1),r("FormItem",{attrs:{prop:"email",label:"Email"}},[r("Input",{staticStyle:{width:"280px"},attrs:{type:"email"},model:{value:t.registerForm.email,callback:function(e){t.$set(t.registerForm,"email",e)},expression:"registerForm.email"}})],1),r("FormItem",{attrs:{prop:"password",label:"Password"}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"At least 6 characters",type:"password"},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),r("FormItem",{attrs:{prop:"confirmPassword",label:"Confirm Password"}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"Same as your password",type:"password"},model:{value:t.registerForm.confirmPassword,callback:function(e){t.$set(t.registerForm,"confirmPassword",e)},expression:"registerForm.confirmPassword"}})],1),""===t.token?r("div",[r("FormItem",{attrs:{label:"Student ID"}},[r("Input",{staticStyle:{width:"280px"},model:{value:t.registerForm.studentId,callback:function(e){t.$set(t.registerForm,"studentId",e)},expression:"registerForm.studentId"}})],1),r("FormItem",{attrs:{prop:"captcha",label:"Captcha"}},[r("div",{staticClass:"captcha-code"},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"Click to get captcha"},on:{"on-focus":t.onCaptchaInputFocus},model:{value:t.registerForm.captcha,callback:function(e){t.$set(t.registerForm,"captcha",e)},expression:"registerForm.captcha"}})],1),r("div",{staticClass:"captcha-img"},[r("Tooltip",{attrs:{content:"Click to refresh",placement:"right"}},[r("img",{attrs:{src:t.captchaImg},on:{click:t.getCaptcha}})])],1)])],1):t._e()],1)],1),r("div",{staticClass:"btnGroup",staticStyle:{"margin-top":"-1px"}},[r("Button",{staticClass:"btn",attrs:{type:"error",long:"",size:"large",loading:t.btnRegisterLoading},on:{click:t.handleRegister}},[t._v(t._s(t.registerText))]),""===t.token?r("Button",{staticClass:"btn",attrs:{long:"",to:{name:"login"}}},[t._v("Already registered")]):t._e()],1)])},s=[],i=(r("d3b7"),r("7c15")),o={name:"AccountRegisterForm",props:{token:{type:String,default:""},registerText:{type:String,default:"Register"}},data:function(){var t=this,e=function(e,r,a){i["a"].isExist({username:r}).then((function(t){t?a(new Error("already exists")):a()})).catch((function(e){t.$Message.error(e.message)}))},r=function(e,r,a){i["a"].isExist({email:r}).then((function(t){t?a(new Error("already exists")):a()})).catch((function(e){t.$Message.error(e.message)}))},a=function(e,r,a){""!==r&&t.$refs.registerForm.validateField("confirmPassword"),a()},s=function(e,r,a){r!==t.registerForm.password&&a(new Error("Password does not match")),a()};return{registerForm:{username:"",email:"",password:"",confirmPassword:"",studentId:"",captcha:""},registerRules:{username:[{required:!0,trigger:"blur"},{validator:e,trigger:"blur"}],email:[{required:!0,type:"email",trigger:"blur"},{validator:r,trigger:"blur"}],password:[{required:!0,trigger:"blur",min:6,max:32},{validator:a,trigger:"blur"}],confirmPassword:[{required:!0,validator:s,trigger:"change"}],captcha:[{required:!0,trigger:"blur",min:1,max:10}]},captchaId:0,captchaImg:"",btnRegisterLoading:!1}},methods:{getCaptcha:function(){var t=this;i["a"].getCaptcha().then((function(e){t.captchaId=e.captchaId,t.captchaImg=e.captcha})).catch((function(e){t.$Message.error(e.message)}))},resetCaptcha:function(){this.registerForm.captcha="",this.getCaptcha()},onCaptchaInputFocus:function(){this.captchaId||this.getCaptcha()},handleRegister:function(){var t=this;this.$refs.registerForm.validate((function(e){if(e){var r=Object.assign({},t.registerForm),a="register";return delete r.confirmPassword,""===t.token?r.captchaId=t.captchaId:(delete r.studentId,delete r.captcha,delete r.captchaId,r.token=t.token,a="thirdPartyRegister"),t.btnRegisterLoading=!0,void i["a"][a](r).then((function(e){t.$emit("on-success",e),t.$refs.registerForm.resetFields()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnRegisterLoading=!1,""===t.token&&t.resetCaptcha()}))}""===t.token&&t.resetCaptcha()}))}}},c=o,n=(r("c849"),r("2877")),l=Object(n["a"])(c,a,s,!1,null,"66774b84",null);e["a"]=l.exports},"83cd":function(t,e,r){"use strict";var a=r("b6a4"),s=r.n(a);s.a},ac70:function(t,e,r){},b6a4:function(t,e,r){},c849:function(t,e,r){"use strict";var a=r("ac70"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-0586bea7.a5ead1ce.js.map