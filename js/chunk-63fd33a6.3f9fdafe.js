(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63fd33a6"],{1010:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("Row",[r("Col",{attrs:{span:"16"}},[r("div",{staticStyle:{"margin-right":"30px"}},[r("UserProfile"),r("UserPassword",{staticStyle:{margin:"20px 0"}}),r("UserEmail")],1)]),r("Col",{attrs:{span:"8"}},[r("Card",{staticClass:"profile clearfix",attrs:{padding:20,"dis-hover":""}},[r("div",{staticClass:"avatar-box"},[r("img",{attrs:{src:e.avatar}})]),r("div",{staticStyle:{"text-align":"center"}},[r("span",{staticStyle:{color:"#aaa"}},[e._v("We use "),r("a",{attrs:{href:"https://cn.gravatar.com/",target:"_blank"}},[e._v("Gravatar")]),e._v(" to present your avatar icon")])])])],1)],1)],1)},s=[],o=r("5530"),n=r("2f62"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{attrs:{title:"Your Profile",padding:0,"dis-hover":""}},[r("div",{staticClass:"form"},[r("Form",{ref:"profileForm",attrs:{model:e.profileForm,rules:e.profileRules,"label-position":"right","label-width":100}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"Username"}},[r("span",[e._v(e._s(e.profile.username))])]),r("FormItem",{attrs:{label:"Nickname"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.nickname,callback:function(t){e.$set(e.profileForm,"nickname",t)},expression:"profileForm.nickname"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("FormItem",{attrs:{label:"Student ID"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.studentId,callback:function(t){e.$set(e.profileForm,"studentId",t)},expression:"profileForm.studentId"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("FormItem",{attrs:{label:"Confirm Password",prop:"password"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.profileForm.password,callback:function(t){e.$set(e.profileForm,"password",t)},expression:"profileForm.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",[r("Button",{attrs:{disabled:!e.isVerified,loading:e.btnLoading},on:{click:function(t){return e.handleProfileUpdate("profileForm")}}},[e._v("Update")])],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"Gender"}},[r("RadioGroup",{attrs:{border:""},model:{value:e.profileForm.gender,callback:function(t){e.$set(e.profileForm,"gender",t)},expression:"profileForm.gender"}},[r("Radio",{attrs:{label:"2"}},[r("Icon",{attrs:{type:"md-help"}})],1),r("Radio",{attrs:{label:"1"}},[r("Icon",{attrs:{type:"md-male"}})],1),r("Radio",{attrs:{label:"0"}},[r("Icon",{attrs:{type:"md-female"}})],1)],1)],1),r("FormItem",{attrs:{label:"Phone"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.phone,callback:function(t){e.$set(e.profileForm,"phone",t)},expression:"profileForm.phone"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-call-outline"},slot:"prepend"})],1)],1),r("FormItem",{attrs:{label:"Email"}},[e.isVerified?r("Tooltip",{attrs:{content:"You are verified",placement:"right"}},[r("span",{staticClass:"email-verified",domProps:{textContent:e._s(e.profile.email)}})]):r("Tooltip",{attrs:{content:"Click to send an email",placement:"right"}},[r("span",{staticClass:"email-unverified",domProps:{textContent:e._s(e.profile.email)},on:{click:e.sendEmail}})])],1),r("FormItem",{attrs:{label:"Roles"}},e._l(e.profile.roles,(function(t){return r("span",{key:t,staticClass:"roles"},[r("Tag",{attrs:{color:e.USER_ROLE[t].color}},[e._v(e._s(t))])],1)})),0)],1)],1)],1)],1)])},l=[],d=(r("d3b7"),r("25f0"),r("7c15")),p=r("c9d9"),c={data:function(){return{profileForm:{nickname:"",studentId:"",gender:"",phone:"",password:""},profileRules:{password:[{required:!0,trigger:"blur",min:6,max:32}]},btnLoading:!1}},methods:{handleProfileUpdate:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.btnLoading=!0,d["a"].updateProfile(t.profileForm).then((function(e){d["a"].getProfile(),t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnLoading=!1})))}))},sendEmail:function(){var e=this;if(!this.isVerified){var t=this.$Message.loading({content:"Waiting...",duration:0});d["a"].sendVerificationEmail(this.username).then((function(r){t(),e.$Message.success("An verification email has sent to ".concat(r))})).catch((function(r){t(),e.$Message.error(r.message)}))}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(n["d"])("user",["profile"])),Object(n["c"])("user",["isVerified","username"])),{},{USER_ROLE:function(){return p["j"]}}),mounted:function(){var e=this;d["a"].getProfile((function(t){e.profileForm=Object.assign({},t),e.profileForm.gender=e.profileForm.gender.toString()}))}},m=c,u=(r("e824"),r("2877")),f=Object(u["a"])(m,i,l,!1,null,"148256eb",null),w=f.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{attrs:{title:"Change Your Password",padding:0,"dis-hover":""}},[r("div",{staticClass:"form"},[r("Form",{ref:"passwordForm",attrs:{model:e.passwordForm,rules:e.passwordRules,"label-position":"right","label-width":105}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"Old Password",prop:"oldPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",[r("Button",{attrs:{loading:e.btnLoading},on:{click:function(t){return e.handlePasswordUpdate("passwordForm")}}},[e._v("Update")])],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"New Password",prop:"newPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.newPassword,callback:function(t){e.$set(e.passwordForm,"newPassword",t)},expression:"passwordForm.newPassword"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",{attrs:{label:"Confirm New Password",prop:"confirmNewPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.confirmNewPassword,callback:function(t){e.$set(e.passwordForm,"confirmNewPassword",t)},expression:"passwordForm.confirmNewPassword"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1)],1)],1)],1)])},g=[],F={data:function(){var e=this,t=function(t,r,a){""!==r&&e.$refs.passwordForm.validateField("confirmNewPassword"),a()},r=function(t,r,a){r!==e.passwordForm.newPassword&&a(new Error("Password does not match")),a()};return{passwordForm:{oldPassword:"",newPassword:"",confirmNewPassword:""},passwordRules:{oldPassword:[{required:!0,trigger:"blur",min:6,max:32}],newPassword:[{required:!0,trigger:"blur",min:6,max:32},{validator:t,trigger:"blur"}],confirmNewPassword:[{required:!0,validator:r,trigger:"change"}]},btnLoading:!1}},methods:{handlePasswordUpdate:function(e){var t=this;this.$refs[e].validate((function(r){if(r){var a={password:t.passwordForm.oldPassword,newPassword:t.passwordForm.newPassword};t.btnLoading=!0,d["a"].updateProfile(a).then((function(e){t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnLoading=!1,t.$refs[e].resetFields()}))}}))}}},h=F,v=(r("5e03"),Object(u["a"])(h,b,g,!1,null,"a09ba754",null)),P=v.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{attrs:{title:"Change Your Email",padding:0,"dis-hover":""}},[r("div",{staticClass:"form"},[r("Form",{ref:"emailForm",attrs:{model:e.emailForm,rules:e.emailRules,"label-position":"right","label-width":105}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"Password",prop:"password"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.emailForm.password,callback:function(t){e.$set(e.emailForm,"password",t)},expression:"emailForm.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",[r("Button",{attrs:{loading:e.btnLoading},on:{click:function(t){return e.handleEmailUpdate("emailForm")}}},[e._v("Update")])],1)],1),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"New Email",prop:"newEmail"}},[r("div",[r("Input",{staticStyle:{width:"200px"},attrs:{type:"email"},model:{value:e.emailForm.newEmail,callback:function(t){e.$set(e.emailForm,"newEmail",t)},expression:"emailForm.newEmail"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-mail-outline"},slot:"prepend"})],1),r("span",{staticStyle:{color:"#aaa"}},[e._v("Your email will be used at "),r("a",{attrs:{href:"",target:"_blank"}},[e._v("Gravatar.com")])])],1)])],1)],1)],1)],1)])},I=[],x={data:function(){var e=function(e,t,r){d["a"].isExist({email:t}).then((function(e){r()}),(function(e){r(new Error("already exists"))}))};return{emailForm:{password:"",newEmail:""},emailRules:{password:[{required:!0,trigger:"blur",min:6,max:32}],newEmail:[{required:!0,type:"email",trigger:"blur"},{validator:e,trigger:"blur"}]},btnLoading:!1}},methods:{handleEmailUpdate:function(e){var t=this;this.$refs[e].validate((function(r){r&&(t.btnLoading=!0,d["a"].updateProfile(t.emailForm).then((function(e){d["a"].getProfile(),t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnLoading=!1,t.$refs[e].resetFields()})))}))}}},k=x,$=(r("3633"),Object(u["a"])(k,y,I,!1,null,"5a80d4a7",null)),C=$.exports,E={components:{UserProfile:w,UserPassword:P,UserEmail:C},computed:Object(o["a"])(Object(o["a"])({},Object(n["d"])("user",["profile"])),Object(n["c"])("user",["avatar","isVerified"]))},_=E,U=(r("bb2f"),Object(u["a"])(_,a,s,!1,null,"3bfffcf7",null));t["default"]=U.exports},"29a6":function(e,t,r){},3633:function(e,t,r){"use strict";var a=r("d98f"),s=r.n(a);s.a},"5e03":function(e,t,r){"use strict";var a=r("d7ce"),s=r.n(a);s.a},"95a7":function(e,t,r){},bb2f:function(e,t,r){"use strict";var a=r("29a6"),s=r.n(a);s.a},d7ce:function(e,t,r){},d98f:function(e,t,r){},e824:function(e,t,r){"use strict";var a=r("95a7"),s=r.n(a);s.a}}]);
//# sourceMappingURL=chunk-63fd33a6.3f9fdafe.js.map