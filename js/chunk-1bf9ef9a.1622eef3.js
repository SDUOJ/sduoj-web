(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bf9ef9a"],{"25a5":function(e,t,r){"use strict";var a=r("5f24"),n=r.n(a);n.a},"29f5":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"center"},[r("Form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules,"label-position":"top"}},[r("EmailVerify",{attrs:{email:e.registerForm.email,"email-code":e.registerForm.emailCode},on:{"update:email":function(t){return e.$set(e.registerForm,"email",t)},"update:emailCode":function(t){return e.$set(e.registerForm,"emailCode",t)},"update:email-code":function(t){return e.$set(e.registerForm,"emailCode",t)}}}),r("FormItem",{attrs:{prop:"password",label:"Password"}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"At least 6 characters",type:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("FormItem",{attrs:{prop:"confirmPassword",label:"Confirm Password"}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"Same as your password",type:"password"},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}})],1)],1)],1),r("div",{staticClass:"btnGroup",staticStyle:{"margin-top":"-1px"}},[r("Button",{staticClass:"btn",attrs:{type:"error",long:"",size:"large",loading:e.btnRegisterLoading},on:{click:e.handleRegister}},[e._v(e._s(e.registerText))]),""===e.token?r("Button",{staticClass:"btn",attrs:{long:"",to:{name:"login"}}},[e._v("Already registered")]):e._e()],1)])},n=[],i=(r("d3b7"),r("7c15")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("br"),r("div",[r("FormItem",{attrs:{prop:e.emailProp,label:e.emailLabel}},[r("Input",{staticStyle:{width:"280px"},attrs:{type:"email"},model:{value:e.tempEmail,callback:function(t){e.tempEmail=t},expression:"tempEmail"}},[r("div",{staticClass:"btns",attrs:{slot:"append"},slot:"append"},[e.captchaColdDown?r("span",[e._v(e._s(e.captchaColdDown+" s"))]):r("Button",{attrs:{size:"small",type:"text",loading:e.captchaBtnLoading},on:{click:e.openCaptchaModal}},[e._v("Verify")])],1)]),e._t("email-tip")],2),r("FormItem",{attrs:{prop:e.emailCodeProp,label:e.emailCodeLabel,required:""}},[r("Input",{staticStyle:{width:"280px"},attrs:{placeholder:"Check your email",type:"text"},model:{value:e.tempEmailCode,callback:function(t){e.tempEmailCode=t},expression:"tempEmailCode"}}),e._t("email-code-tip")],2)],1),r("Modal",{attrs:{title:"Human verification",width:"350",transfer:"",loading:e.captchaModalLoading,"mask-closable":!1},on:{"on-ok":e.sendEmail},model:{value:e.captchaModal,callback:function(t){e.captchaModal=t},expression:"captchaModal"}},[r("div",{staticStyle:{width:"300px"}},[r("div",{staticClass:"captcha-img"},[e._t("captcha-tip",[r("div",{staticStyle:{"margin-top":"-15px","margin-bottom":"10px"}},[r("span",[e._v("Are you a ROBOT?")])])]),r("Tooltip",{attrs:{content:"Click to refresh",placement:"right"}},[r("img",{attrs:{src:e.captchaImg},on:{click:e.getCaptcha}})])],2),r("div",[r("Input",{attrs:{placeholder:"Enter captcha"},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}})],1)])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticStyle:{width:"280px","word-wrap":"break-word"}},[e._v(" 由于我们的OJ服务器资源有限，现仅支持教育邮箱(高校或科研院所)进行注册。 如果服务器判断有误，请通过您的教育邮箱给我们发邮件，邮件内容附带上机构名字， 我们会尽快添加到服务器的教育邮箱列表中。 "),r("br"),e._v(" Due to the limited resources of our OJ server, we now only support education (or research institute) emails for registration. If the server judges that there is a mistake, please send us an email through your educational email address with the organization's name attached to it. We will add it to the educational email list of the server as soon as possible. ")])}],u=r("2a95"),l={name:"EmailVerify",props:{emailProp:{type:String,default:"email"},emailLabel:{type:String,default:"Email (as your username)"},emailCodeProp:{type:String,default:"emailCode"},emailCodeLabel:{type:String,default:"Verification Code"},email:{type:String},emailCode:{type:String}},data:function(){var e=function(e,t,r){i["a"].isExist({email:t}).then((function(e){e?r(new Error("already exists")):r()})).catch((function(e){r(new Error(e.message))}))};return{tempEmail:"",tempEmailCode:"",captchaId:0,captcha:"",captchaImg:"",captchaColdDown:0,captchaModal:!1,captchaModalLoading:!0,captchaBtnLoading:!1,captchaTimer:null,validator:new u["a"]({email:[{required:!0,type:"email",trigger:"blur"},{validator:e,trigger:"blur"}]})}},methods:{getCaptcha:function(){var e=this;return new Promise((function(t,r){i["a"].getCaptcha().then((function(r){e.captchaId=r.captchaId,e.captchaImg=r.captcha,e.clearCaptcha(),t(r)})).catch((function(t){e.$Message.error(t.message),r(t)}))}))},clearCaptcha:function(){this.captcha=""},openCaptchaModal:function(){var e=this;this.captchaBtnLoading=!0,this.validator.validate({email:this.tempEmail},(function(t){null===t?e.getCaptcha().then((function(t){e.captchaModal=!0})).finally((function(){e.captchaBtnLoading=!1})):(e.captchaBtnLoading=!1,e.$Message.error(t[0].message))}))},sendEmail:function(){var e=this;if(""===this.captcha)return this.$Message.error("Enter captcha"),this.captchaModalLoading=!1,void this.$nextTick((function(){e.captchaModalLoading=!0}));i["a"].sendVerificationEmail({email:this.tempEmail,captchaId:this.captchaId,captcha:this.captcha}).then((function(t){e.$emit("on-success",t),e.captchaModal=!1,e.$Message.success({content:"A verification code has been send to your email",duration:10}),e.captchaColdDown=t,e.captchaTimer=setInterval((function(){--e.captchaColdDown<=0&&(clearInterval(e.captchaTimer),e.captchaTimer=null,e.captchaColdDown=0)}),1e3)})).catch((function(t){e.$emit("on-failed",t),e.$Message.error(t.message)})).finally((function(){e.getCaptcha(),e.captchaModalLoading=!1,e.$nextTick((function(){e.captchaModalLoading=!0}))}))}},watch:{email:function(e){this.tempEmail=e},emailCode:function(e){this.tempEmailCode=e},tempEmail:function(e){this.$emit("update:email",e)},tempEmailCode:function(e){this.$emit("update:emailCode",e)}},mounted:function(){this.tempEmail=this.email,this.tempEmailCode=this.emailCode},beforeDestroy:function(){this.captchaTimer&&clearInterval(this.captchaTimer)}},c=l,f=(r("507b"),r("2877")),d=Object(f["a"])(c,o,s,!1,null,"45a9e067",null),p=d.exports,m={name:"AccountRegisterForm",components:{EmailVerify:p},props:{token:{type:String,default:""},registerText:{type:String,default:"Register"}},data:function(){var e=this,t=function(t,r,a){i["a"].isExist({email:r}).then((function(e){e?a(new Error("already exists")):a()})).catch((function(t){e.$Message.error(t.message)}))},r=function(t,r,a){""!==r&&e.$refs.registerForm.validateField("confirmPassword"),a()},a=function(t,r,a){r!==e.registerForm.password&&a(new Error("Password does not match")),a()};return{registerForm:{email:"",emailCode:"",password:"",confirmPassword:""},registerRules:{email:[{required:!0,type:"email",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,trigger:"blur",min:6,max:32},{validator:r,trigger:"blur"}],confirmPassword:[{required:!0,validator:a,trigger:"change"}]},btnRegisterLoading:!1}},methods:{handleRegister:function(){var e=this;this.$refs.registerForm.validate((function(t){if(t){e.registerForm.username=e.registerForm.email;var r=Object.assign({},e.registerForm),a="register";delete r.confirmPassword,""!==e.token&&(r.token=e.token,a="thirdPartyRegister"),e.btnRegisterLoading=!0,i["a"][a](r).then((function(t){e.$emit("on-success",t),e.$refs.registerForm.resetFields()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.btnRegisterLoading=!1}))}}))}}},h=m,g=(r("25a5"),Object(f["a"])(h,a,n,!1,null,"03d42db1",null));t["a"]=g.exports},"2a95":function(e,t,r){"use strict";(function(e){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},r.apply(this,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,r){return s=o()?Reflect.construct:function(e,t,r){var a=[null];a.push.apply(a,t);var n=Function.bind.apply(e,a),o=new n;return r&&i(o,r.prototype),o},s.apply(null,arguments)}function u(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function l(e){var t="function"===typeof Map?new Map:void 0;return l=function(e){if(null===e||!u(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,n(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,e)},l(e)}var c=/%[sdj%]/g,f=function(){};function d(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var r=e.field;t[r]=t[r]||[],t[r].push(e)})),t}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=1,n=t[0],i=t.length;if("function"===typeof n)return n.apply(null,t.slice(1));if("string"===typeof n){var o=String(n).replace(c,(function(e){if("%%"===e)return"%";if(a>=i)return e;switch(e){case"%s":return String(t[a++]);case"%d":return Number(t[a++]);case"%j":try{return JSON.stringify(t[a++])}catch(r){return"[Circular]"}break;default:return e}}));return o}return n}function m(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}function h(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!m(t)||"string"!==typeof e||e))}function g(e,t,r){var a=[],n=0,i=e.length;function o(e){a.push.apply(a,e),n++,n===i&&r(a)}e.forEach((function(e){t(e,o)}))}function y(e,t,r){var a=0,n=e.length;function i(o){if(o&&o.length)r(o);else{var s=a;a+=1,s<n?t(e[s],i):r([])}}i([])}function v(e){var t=[];return Object.keys(e).forEach((function(r){t.push.apply(t,e[r])})),t}"undefined"!==typeof e&&Object({VUE_APP_OJ_SERVER:"",VUE_APP_OJ_WS:"",VUE_APP_OJ_MANAGE:"/manage",NODE_ENV:"production",BASE_URL:"/"});var b=function(e){function t(t,r){var a;return a=e.call(this,"Async Validation Error")||this,a.errors=t,a.fields=r,a}return a(t,e),t}(l(Error));function w(e,t,r,a){if(t.first){var n=new Promise((function(t,n){var i=function(e){return a(e),e.length?n(new b(e,d(e))):t()},o=v(e);y(o,r,i)}));return n["catch"]((function(e){return e})),n}var i=t.firstFields||[];!0===i&&(i=Object.keys(e));var o=Object.keys(e),s=o.length,u=0,l=[],c=new Promise((function(t,n){var c=function(e){if(l.push.apply(l,e),u++,u===s)return a(l),l.length?n(new b(l,d(l))):t()};o.length||(a(l),t()),o.forEach((function(t){var a=e[t];-1!==i.indexOf(t)?y(a,r,c):g(a,r,c)}))}));return c["catch"]((function(e){return e})),c}function q(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"===typeof t?t():t,field:t.field||e.fullField}}}function x(e,t){if(t)for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];"object"===typeof n&&"object"===typeof e[a]?e[a]=r(r({},e[a]),n):e[a]=n}return e}function E(e,t,r,a,n,i){!e.required||r.hasOwnProperty(e.field)&&!h(t,i||e.type)||a.push(p(n.messages.required,e.fullField))}function O(e,t,r,a,n){(/^\s+$/.test(t)||""===t)&&a.push(p(n.messages.whitespace,e.fullField))}var F={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},P={integer:function(e){return P.number(e)&&parseInt(e,10)===e},float:function(e){return P.number(e)&&!P.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!P.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(F.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(F.url)},hex:function(e){return"string"===typeof e&&!!e.match(F.hex)}};function C(e,t,r,a,n){if(e.required&&void 0===t)E(e,t,r,a,n);else{var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;i.indexOf(o)>-1?P[o](t)||a.push(p(n.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&a.push(p(n.messages.types[o],e.fullField,e.type))}}function _(e,t,r,a,n){var i="number"===typeof e.len,o="number"===typeof e.min,s="number"===typeof e.max,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=t,c=null,f="number"===typeof t,d="string"===typeof t,m=Array.isArray(t);if(f?c="number":d?c="string":m&&(c="array"),!c)return!1;m&&(l=t.length),d&&(l=t.replace(u,"_").length),i?l!==e.len&&a.push(p(n.messages[c].len,e.fullField,e.len)):o&&!s&&l<e.min?a.push(p(n.messages[c].min,e.fullField,e.min)):s&&!o&&l>e.max?a.push(p(n.messages[c].max,e.fullField,e.max)):o&&s&&(l<e.min||l>e.max)&&a.push(p(n.messages[c].range,e.fullField,e.min,e.max))}var A="enum";function j(e,t,r,a,n){e[A]=Array.isArray(e[A])?e[A]:[],-1===e[A].indexOf(t)&&a.push(p(n.messages[A],e.fullField,e[A].join(", ")))}function k(e,t,r,a,n){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||a.push(p(n.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var i=new RegExp(e.pattern);i.test(t)||a.push(p(n.messages.pattern.mismatch,e.fullField,t,e.pattern))}}var S={required:E,whitespace:O,type:C,range:_,enum:j,pattern:k};function $(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t,"string")&&!e.required)return r();S.required(e,t,a,i,n,"string"),h(t,"string")||(S.type(e,t,a,i,n),S.range(e,t,a,i,n),S.pattern(e,t,a,i,n),!0===e.whitespace&&S.whitespace(e,t,a,i,n))}r(i)}function M(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&S.type(e,t,a,i,n)}r(i)}function R(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(""===t&&(t=void 0),h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&(S.type(e,t,a,i,n),S.range(e,t,a,i,n))}r(i)}function I(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&S.type(e,t,a,i,n)}r(i)}function L(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),h(t)||S.type(e,t,a,i,n)}r(i)}function T(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&(S.type(e,t,a,i,n),S.range(e,t,a,i,n))}r(i)}function D(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&(S.type(e,t,a,i,n),S.range(e,t,a,i,n))}r(i)}function V(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t,"array")&&!e.required)return r();S.required(e,t,a,i,n,"array"),h(t,"array")||(S.type(e,t,a,i,n),S.range(e,t,a,i,n))}r(i)}function B(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&S.type(e,t,a,i,n)}r(i)}var N="enum";function z(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n),void 0!==t&&S[N](e,t,a,i,n)}r(i)}function J(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t,"string")&&!e.required)return r();S.required(e,t,a,i,n),h(t,"string")||S.pattern(e,t,a,i,n)}r(i)}function U(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t,"date")&&!e.required)return r();var s;if(S.required(e,t,a,i,n),!h(t,"date"))s=t instanceof Date?t:new Date(t),S.type(e,s,a,i,n),s&&S.range(e,s.getTime(),a,i,n)}r(i)}function W(e,t,r,a,n){var i=[],o=Array.isArray(t)?"array":typeof t;S.required(e,t,a,i,n,o),r(i)}function G(e,t,r,a,n){var i=e.type,o=[],s=e.required||!e.required&&a.hasOwnProperty(e.field);if(s){if(h(t,i)&&!e.required)return r();S.required(e,t,a,o,n,i),h(t,i)||S.type(e,t,a,o,n)}r(o)}function Z(e,t,r,a,n){var i=[],o=e.required||!e.required&&a.hasOwnProperty(e.field);if(o){if(h(t)&&!e.required)return r();S.required(e,t,a,i,n)}r(i)}var H={string:$,method:M,number:R,boolean:I,regexp:L,integer:T,float:D,array:V,object:B,enum:z,pattern:J,date:U,url:G,hex:G,email:G,required:W,any:Z};function Y(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var K=Y();function Q(e){this.rules=null,this._messages=K,this.define(e)}Q.prototype={messages:function(e){return e&&(this._messages=x(Y(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,r;for(t in this.rules={},e)e.hasOwnProperty(t)&&(r=e[t],this.rules[t]=Array.isArray(r)?r:[r])},validate:function(e,t,a){var n=this;void 0===t&&(t={}),void 0===a&&(a=function(){});var i,o,s=e,u=t,l=a;if("function"===typeof u&&(l=u,u={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();function c(e){var t,r=[],a={};function n(e){var t;Array.isArray(e)?r=(t=r).concat.apply(t,e):r.push(e)}for(t=0;t<e.length;t++)n(e[t]);r.length?a=d(r):(r=null,a=null),l(r,a)}if(u.messages){var f=this.messages();f===K&&(f=Y()),x(f,u.messages),u.messages=f}else u.messages=this.messages();var m={},h=u.keys||Object.keys(this.rules);h.forEach((function(t){i=n.rules[t],o=s[t],i.forEach((function(a){var i=a;"function"===typeof i.transform&&(s===e&&(s=r({},s)),o=s[t]=i.transform(o)),i="function"===typeof i?{validator:i}:r({},i),i.validator=n.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=n.getType(i),i.validator&&(m[t]=m[t]||[],m[t].push({rule:i,value:o,source:s,field:t}))}))}));var g={};return w(m,u,(function(e,t){var a,n=e.rule,i=("object"===n.type||"array"===n.type)&&("object"===typeof n.fields||"object"===typeof n.defaultField);function o(e,t){return r(r({},t),{},{fullField:n.fullField+"."+e})}function s(a){void 0===a&&(a=[]);var s=a;if(Array.isArray(s)||(s=[s]),!u.suppressWarning&&s.length&&Q.warning("async-validator:",s),s.length&&n.message&&(s=[].concat(n.message)),s=s.map(q(n)),u.first&&s.length)return g[n.field]=1,t(s);if(i){if(n.required&&!e.value)return n.message?s=[].concat(n.message).map(q(n)):u.error&&(s=[u.error(n,p(u.messages.required,n.field))]),t(s);var l={};if(n.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(l[c]=n.defaultField);for(var f in l=r(r({},l),e.rule.fields),l)if(l.hasOwnProperty(f)){var d=Array.isArray(l[f])?l[f]:[l[f]];l[f]=d.map(o.bind(null,f))}var m=new Q(l);m.messages(u.messages),e.rule.options&&(e.rule.options.messages=u.messages,e.rule.options.error=u.error),m.validate(e.value,e.rule.options||u,(function(e){var r=[];s&&s.length&&r.push.apply(r,s),e&&e.length&&r.push.apply(r,e),t(r.length?r:null)}))}else t(s)}i=i&&(n.required||!n.required&&e.value),n.field=e.field,n.asyncValidator?a=n.asyncValidator(n,e.value,s,e.source,u):n.validator&&(a=n.validator(n,e.value,s,e.source,u),!0===a?s():!1===a?s(n.message||n.field+" fails"):a instanceof Array?s(a):a instanceof Error&&s(a.message)),a&&a.then&&a.then((function(){return s()}),(function(e){return s(e)}))}),(function(e){c(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!H.hasOwnProperty(e.type))throw new Error(p("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),r=t.indexOf("message");return-1!==r&&t.splice(r,1),1===t.length&&"required"===t[0]?H.required:H[this.getType(e)]||!1}},Q.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");H[e]=t},Q.warning=f,Q.messages=K,Q.validators=H,t["a"]=Q}).call(this,r("4362"))},"507b":function(e,t,r){"use strict";var a=r("e0c58"),n=r.n(a);n.a},"5f24":function(e,t,r){},e0c58:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1bf9ef9a.1622eef3.js.map