{"version":3,"sources":["webpack:///./src/views/contest/ContestListView.vue?5da8","webpack:///src/views/contest/ContestListView.vue","webpack:///./src/views/contest/ContestListView.vue?512a","webpack:///./src/views/contest/ContestListView.vue","webpack:///./src/components/contest/ContestList.vue?37dd","webpack:///src/components/contest/ContestList.vue","webpack:///./src/components/contest/ContestList.vue?daf4","webpack:///./src/components/contest/ContestList.vue","webpack:///./src/components/contest/ContestList.vue?e301","webpack:///./src/views/contest/ContestListView.vue?ffa2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","getContestList","model","value","callback","$$v","groupId","expression","_l","group","key","staticStyle","slot","selectContestMode","mode","toUpperCase","ref","total","pageNow","pageSize","pageSizeOpts","$event","onPageChange","onPageSizeChange","toContestDetail","upcomingContest","contestId","_v","_s","contestTitle","countdown","_e","staticRenderFns","getGroupIdFromStorage","localStorage","getItem","STORAGE_KEY","setGroupIdToStorage","setItem","mixins","components","data","mygroups","computed","CONTEST_MODE","startTime","now","duration","weeks","humanize","get","$route","query","set","$router","push","undefined","methods","getMyGroupList","$refs","contestList","getParticipatedContests","catch","getUpcomingContest","api","watch","mounted","component","contest","participatedContest","includes","_f","gmtStart","features","openness","CONTEST_OPENNESS","PRIVATE","PROTECTED","class","gmtEnd","participantNum","$store","state","name","spinShow","filters","timeformat","timestamp","parseInt","time2hour","contestStatus","contestStartTime","params","Promise","CONTEST_STATUS"],"mappings":"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","file":"js/chunk-53991371.4c6a38ad.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('Tabs',{attrs:{\"animated\":false},on:{\"on-click\":_vm.getContestList},model:{value:(_vm.groupId),callback:function ($$v) {_vm.groupId=$$v},expression:\"groupId\"}},[_c('TabPane',{attrs:{\"name\":\"all\",\"label\":\"All\"}}),_vm._l((_vm.mygroups),function(group){return _c('TabPane',{key:group.groupId,attrs:{\"name\":group.groupId,\"label\":((group.groupId) + \": \" + (group.title))}})})],2),_c('Row',[_c('Col',{attrs:{\"span\":\"18\"}},[_c('div',{staticStyle:{\"margin-right\":\"20px\"}},[_c('Card',{attrs:{\"title\":\"Contest List\",\"padding\":0,\"dis-hover\":\"\"}},[_c('Select',{staticStyle:{\"width\":\"100px\"},attrs:{\"slot\":\"extra\",\"size\":\"small\"},slot:\"extra\",model:{value:(_vm.selectContestMode),callback:function ($$v) {_vm.selectContestMode=$$v},expression:\"selectContestMode\"}},[_c('Option',{attrs:{\"value\":\"all\",\"label\":\"All\"}}),_vm._l((_vm.CONTEST_MODE),function(mode){return _c('Option',{key:mode,attrs:{\"value\":mode,\"label\":mode.toUpperCase()}})})],2),_c('ContestList',{ref:\"contestList\"}),_c('div',{staticClass:\"float-right footer-pages\"},[_c('Page',{attrs:{\"size\":\"small\",\"show-elevator\":\"\",\"show-sizer\":\"\",\"total\":_vm.total,\"current\":_vm.pageNow,\"page-size\":_vm.pageSize,\"page-size-opts\":_vm.pageSizeOpts},on:{\"update:current\":function($event){_vm.pageNow=$event},\"on-change\":_vm.onPageChange,\"on-page-size-change\":_vm.onPageSizeChange}})],1)],1)],1)]),_c('Col',{attrs:{\"span\":\"6\"}},[(_vm.upcomingContest)?_c('Card',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"title\":\"Upcoming\",\"padding\":0,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"upcoming-title\",on:{\"click\":function($event){return _vm.toContestDetail(_vm.upcomingContest.contestId)}}},[_vm._v(\" \"+_vm._s(_vm.upcomingContest.contestTitle)+\" \")]),_c('div',{staticClass:\"upcoming-countdown\"},[_c('span',[_vm._v(_vm._s(_vm.countdown))])])]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2021 the original author or authors.\n\n   Licensed under the General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/gpl-3.0.en.html\n -->\n\n<template>\n  <div class=\"container\">\n    <Tabs v-model=\"groupId\" :animated=\"false\" @on-click=\"getContestList\">\n      <TabPane name=\"all\" label=\"All\" />\n      <TabPane v-for=\"group in mygroups\" :key=\"group.groupId\" :name=\"group.groupId\" :label=\"`${group.groupId}: ${group.title}`\" />\n    </Tabs>\n    <Row>\n      <Col span=\"18\">\n        <div style=\"margin-right: 20px\">\n          <Card title=\"Contest List\" :padding=\"0\" dis-hover>\n            <Select size=\"small\" v-model=\"selectContestMode\" style=\"width: 100px\" slot=\"extra\">\n              <Option value=\"all\" label=\"All\" />\n              <Option v-for=\"mode in CONTEST_MODE\" :key=\"mode\" :value=\"mode\" :label=\"mode.toUpperCase()\" />\n            </Select>\n            <ContestList ref=\"contestList\"/>\n            <div class=\"float-right footer-pages\">\n              <Page\n                size=\"small\" show-elevator show-sizer\n                :total=\"total\"\n                :current.sync=\"pageNow\"\n                :page-size=\"pageSize\"\n                :page-size-opts=\"pageSizeOpts\"\n                @on-change=\"onPageChange\"\n                @on-page-size-change=\"onPageSizeChange\"/>\n            </div>\n          </Card>\n        </div>\n      </Col>\n      <Col span=\"6\">\n        <Card\n          style=\"margin-bottom: 30px\"\n          title=\"Upcoming\"\n          :padding=\"0\"\n          dis-hover\n          v-if=\"upcomingContest\">\n          <div class=\"upcoming-title\" @click=\"toContestDetail(upcomingContest.contestId)\">\n            {{ upcomingContest.contestTitle }}\n          </div>\n          <div class=\"upcoming-countdown\"><span>{{ countdown }}</span>\n          </div>\n        </Card>\n        <!--      <Card title=\"My participation\" :padding=\"0\" dis-hover>-->\n        <!--      </Card>-->\n      </Col>\n    </Row>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { mapState } from 'vuex';\nimport { s2hs } from '_u/transform';\nimport api from '_u/api';\nimport { CONTEST_MODE } from '_u/constants';\n\nimport { Page } from '_c/mixins';\nimport ContestList from '_c/contest/ContestList';\n\nconst STORAGE_KEY = 'contest#groupId';\n\nfunction getGroupIdFromStorage() {\n  return localStorage.getItem(STORAGE_KEY) || null;\n}\n\nfunction setGroupIdToStorage(groupId) {\n  localStorage.setItem(STORAGE_KEY, groupId);\n}\n\nexport default {\n  mixins: [Page],\n  components: { ContestList },\n  data: function () {\n    return {\n      mygroups: [],\n      upcomingContest: {},\n      selectContestMode: 'all'\n    }\n  },\n  computed: {\n    ...mapState(['now']),\n    CONTEST_MODE: () => CONTEST_MODE,\n    countdown: function () {\n      const startTime = moment(new Date(parseInt(this.upcomingContest.gmtStart)));\n      if (startTime > this.now) {\n        const duration = moment.duration(startTime.diff(this.now, 'seconds'), 'seconds');\n        if (duration.weeks() > 0) {\n          return duration.humanize();\n        } else {\n          return s2hs(startTime - this.now);\n        }\n      }\n      return '\\b';\n    },\n    groupId: {\n      get: function () {\n        return this.$route.query.groupId || getGroupIdFromStorage() || 'all';\n      },\n      set: function (groupId) {\n        setGroupIdToStorage(groupId);\n        this.$router.push({\n          query: {\n            ...this.$route.query,\n            groupId: groupId === 'all' ? undefined : groupId\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    getMyGroupList: function () {\n      // api.getMyGroupList().then(ret => {\n      //   this.mygroups = ret;\n      // }).catch(reject);\n    },\n    getContestList: function (groupId) {\n      this.$refs.contestList.getContestList({\n        pageNow: this.pageNow,\n        pageSize: this.pageSize,\n        mode: this.selectContestMode === 'all' ? '' : this.selectContestMode,\n        groupId: groupId === 'all' ? undefined : groupId\n      }).then(ret => {\n        this.total = parseInt(ret.totalPage) * this.pageSize;\n      }).catch(err => {\n        this.$Message.error(err.message);\n      });\n\n      this.$refs.contestList.getParticipatedContests().catch(err => {\n        this.$Message.error(err.message);\n      });\n    },\n    getUpcomingContest: function (groupId) {\n      api.getUpcomingContest({\n        groupId: groupId === 'all' ? undefined : groupId\n      }).then(ret => {\n        this.upcomingContest = ret;\n      }).catch(err => {\n        this.$Message.error(err.message);\n      });\n    }\n  },\n  watch: {\n    selectContestMode: function () {\n      this.getContestList(this.groupId);\n      this.getUpcomingContest(this.groupId);\n    }\n  },\n  mounted: function () {\n    this.getMyGroupList();\n    this.getContestList(this.groupId);\n    this.getUpcomingContest(this.groupId);\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.upcoming-title {\n  margin: 10px 0;\n  font-size: 20px;\n  line-height: 24px;\n  color: #0000cc;\n  text-decoration: underline;\n  text-align: center;\n}\n\n.upcoming-title:hover {\n  cursor: pointer;\n}\n\n.upcoming-countdown {\n  margin: 10px 0;\n  text-align: center;\n\n  span {\n    color: rgba(0, 0, 0, 0.85);\n    font-size: 20px;\n    font-weight: bold;\n    line-height: 24px;\n  }\n}\n\n.pages {\n  float: right;\n  margin: 20px auto;\n  padding-right: 15px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContestListView.vue?vue&type=template&id=7da75870&scoped=true&\"\nimport script from \"./ContestListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ContestListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContestListView.vue?vue&type=style&index=0&id=7da75870&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7da75870\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.spinShow)?_c('div',{staticClass:\"spin-container center\"},[_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}})],1):_c('div',[_c('List',{attrs:{\"size\":\"large\",\"item-layout\":\"vertical\"}},_vm._l((_vm.contestList),function(contest){return _c('ListItem',{key:contest.contestId},[_c('div',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"extra\"},slot:\"extra\"},[(_vm.participatedContest.includes(contest.contestId))?_c('div',{staticStyle:{\"color\":\"#5cb85c\"}},[_c('Icon',{attrs:{\"type\":\"md-checkmark\"}}),_c('strong',[_vm._v(\" Participated\")])],1):_vm._e()]),_c('ListItemMeta',[_c('div',{staticClass:\"contest__date numbox\",attrs:{\"slot\":\"avatar\"},slot:\"avatar\"},[_c('div',{staticClass:\"numbox__num__large\"},[_vm._v(_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'DD')))]),_c('div',{staticClass:\"numbox__text\"},[_vm._v(_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'yyyy-MM')))])]),_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"ivu-list-item-meta-title\",on:{\"click\":function($event){return _vm.toContestDetail(contest.contestId)}}},[_vm._v(_vm._s(contest.contestTitle))]),(contest.features.openness === _vm.CONTEST_OPENNESS.PRIVATE)?[(_vm.participatedContest.includes(contest.contestId))?_c('Icon',{attrs:{\"type\":\"ios-unlock\",\"color\":\"#d9534f\",\"size\":\"19\"}}):_c('Icon',{attrs:{\"type\":\"md-lock\",\"color\":\"#d9534f\",\"size\":\"19\"}})]:(contest.features.openness === _vm.CONTEST_OPENNESS.PROTECTED)?[(_vm.participatedContest.includes(contest.contestId))?_c('Icon',{attrs:{\"type\":\"ios-unlock\",\"color\":\"orange\",\"size\":\"19\"}}):_c('Icon',{attrs:{\"type\":\"md-lock\",\"color\":\"orange\",\"size\":\"19\"}})]:_vm._e()],2),_c('ul',{staticClass:\"ivu-list-item-action\",attrs:{\"slot\":\"description\"},slot:\"description\"},[_c('li',[_c('div',{class:(\"contest-type--\" + (contest.features.mode))},[_c('Icon',{attrs:{\"type\":\"md-bulb\",\"color\":\"#fff\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(contest.features.mode.toUpperCase()))])],1)]),_c('li',[_vm._v(\" \"+_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'HH:mm:ss'))+\" \")]),_c('li',[_c('Icon',{attrs:{\"type\":\"ios-time-outline\"}}),_vm._v(\" \"+_vm._s(_vm._f(\"time2hour\")((contest.gmtEnd - contest.gmtStart)))+\" \")],1),_c('li',[_c('Icon',{attrs:{\"type\":\"ios-people-outline\"}}),_vm._v(\" \"+_vm._s(contest.participantNum)+\" \")],1),_c('li',[(_vm.$store.state.now > contest.gmtEnd)?_c('Tag',{attrs:{\"color\":\"green\"}},[_vm._v(\"Finished\")]):(contest.gmtStart < _vm.$store.state.now && _vm.$store.state.now < contest.gmtEnd)?_c('Tag',{attrs:{\"color\":\"gold\"}},[_vm._v(\" Running \")]):_vm._e()],1)])])],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2021 the original author or authors.\n\n   Licensed under the General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/gpl-3.0.en.html\n -->\n\n<template>\n  <div class=\"spin-container center\" v-if=\"spinShow\">\n    <Spin size=\"large\" fix />\n  </div>\n  <div v-else>\n    <List size=\"large\" item-layout=\"vertical\">\n      <ListItem v-for=\"contest in contestList\" :key=\"contest.contestId\">\n        <div slot=\"extra\" style=\"margin-right: 10px\">\n          <div v-if=\"participatedContest.includes(contest.contestId)\" style=\"color: #5cb85c\">\n            <Icon type=\"md-checkmark\"/>\n            <strong>&nbsp;Participated</strong>\n          </div>\n        </div>\n        <ListItemMeta>\n          <div slot=\"avatar\" class=\"contest__date numbox\">\n            <div class=\"numbox__num__large\">{{ contest.gmtStart | timeformat('DD') }}</div>\n            <div class=\"numbox__text\">{{ contest.gmtStart | timeformat('yyyy-MM') }}</div>\n          </div>\n          <div slot=\"title\">\n            <span class=\"ivu-list-item-meta-title\" @click=\"toContestDetail(contest.contestId)\">{{ contest.contestTitle }}</span>\n            <template v-if=\"contest.features.openness === CONTEST_OPENNESS.PRIVATE\">\n              <Icon type=\"ios-unlock\" color=\"#d9534f\" size=\"19\" v-if=\"participatedContest.includes(contest.contestId)\"/>\n              <Icon type=\"md-lock\" color=\"#d9534f\" size=\"19\" v-else/>\n            </template>\n            <template v-else-if=\"contest.features.openness === CONTEST_OPENNESS.PROTECTED\">\n              <Icon type=\"ios-unlock\" color=\"orange\" size=\"19\" v-if=\"participatedContest.includes(contest.contestId)\"/>\n              <Icon type=\"md-lock\" color=\"orange\" size=\"19\" v-else/>\n            </template>\n          </div>\n          <ul slot=\"description\" class=\"ivu-list-item-action\">\n            <li>\n              <div :class=\"`contest-type--${contest.features.mode}`\">\n                <Icon type=\"md-bulb\" color=\"#fff\"/>&nbsp;\n                <span>{{ contest.features.mode.toUpperCase() }}</span>\n              </div>\n            </li>\n            <li>\n              {{ contest.gmtStart | timeformat('HH:mm:ss') }}\n            </li>\n            <li>\n              <Icon type=\"ios-time-outline\"/>\n              {{ (contest.gmtEnd - contest.gmtStart) | time2hour }}\n            </li>\n            <li>\n              <Icon type=\"ios-people-outline\"/>\n              {{ contest.participantNum }}\n            </li>\n            <li>\n              <Tag v-if=\"$store.state.now > contest.gmtEnd\" color=\"green\">Finished</Tag>\n              <Tag v-else-if=\"contest.gmtStart < $store.state.now && $store.state.now < contest.gmtEnd\" color=\"gold\">\n                Running\n              </Tag>\n            </li>\n          </ul>\n        </ListItemMeta>\n      </ListItem>\n    </List>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { CONTEST_OPENNESS, CONTEST_MODE, CONTEST_STATUS } from '_u/constants';\nimport { s2hs } from '_u/transform';\nimport api from '_u/api';\n\nexport default {\n  name: 'ContestList',\n  data: function () {\n    return {\n      contestList: [],\n      participatedContest: [],\n      spinShow: false\n    }\n  },\n  filters: {\n    timeformat: (timestamp, format) => {\n      if (typeof (timestamp) === 'string') {\n        timestamp = parseInt(timestamp);\n      }\n      return moment(new Date(timestamp)).format(format);\n    },\n    time2hour: timediff => s2hs(timediff),\n    contestStatus: contest => {\n      const now = this.$store.store.now;\n      if (contest.contestStartTime > now) {\n        return CONTEST_STATUS.UPCOMING;\n      } else if (contest.contestEndTime < now) {\n        return CONTEST_STATUS.FINISHED;\n      } else {\n        return CONTEST_STATUS.RUNNING;\n      }\n    }\n  },\n  methods: {\n    toContestDetail: function (contestId) {\n      this.$router.push({\n        name: 'contest-detail',\n        params: { contestId }\n      });\n    },\n    getContestList: function (params) {\n      return new Promise((resolve, reject) => {\n        this.spinShow = true;\n        api.getContestList(params)\n          .then(ret => {\n            this.contestList = ret.rows;\n            resolve(ret);\n          })\n          .catch(reject)\n          .finally(() => {\n            this.spinShow = false;\n          });\n      });\n    },\n    getParticipatedContests: function () {\n      return new Promise((resolve, reject) => {\n        api.getParticipatedContests()\n          .then(ret => {\n            this.participatedContest = ret;\n            resolve(ret);\n          })\n          .catch(reject);\n      });\n    }\n  },\n  computed: {\n    CONTEST_OPENNESS: () => CONTEST_OPENNESS,\n    CONTEST_MODE: () => CONTEST_MODE,\n    CONTEST_STATUS: () => CONTEST_STATUS\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n// Number Box Object\n.numbox {\n  font-size: 16px;\n  text-align: center;\n}\n\n.numbox__num__large {\n  font-size: 1.7rem;\n}\n\n.numbox__text {\n  font-size: 14px;\n  color: #AAA;\n}\n\n.contest__date {\n  margin: 0 10px 0 15px;\n  white-space: nowrap;\n}\n\n/deep/ .ivu-list-item {\n  padding: 10px 0;\n}\n\n/deep/ .ivu-list-vertical {\n  .ivu-list-item-meta {\n    margin-bottom: 0;\n  }\n\n  .ivu-list-item-action {\n    margin-top: 6px;\n  }\n\n  .ivu-list-item-meta-title {\n    margin-bottom: 4px;\n    margin-top: 4px;\n\n    :hover {\n      span {\n        cursor: pointer;\n        text-decoration: underline;\n      }\n    }\n  }\n}\n\n/deep/ .ivu-list-item-meta-avatar {\n  margin-right: 0;\n  margin-top: -4px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContestList.vue?vue&type=template&id=3c892d02&scoped=true&\"\nimport script from \"./ContestList.vue?vue&type=script&lang=js&\"\nexport * from \"./ContestList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContestList.vue?vue&type=style&index=0&id=3c892d02&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c892d02\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=style&index=0&id=3c892d02&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=style&index=0&id=3c892d02&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=style&index=0&id=7da75870&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=style&index=0&id=7da75870&lang=less&scoped=true&\""],"sourceRoot":""}