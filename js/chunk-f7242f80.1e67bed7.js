(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7242f80"],{"406c":function(e,t,a){},5475:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box clearfix"},[e._m(0),a("div",{staticClass:"body"},[a("Form",{ref:"resetForm",attrs:{model:e.resetForm,rules:e.resetRules,"label-position":"right","label-width":150,"label-colo":""}},[e.apply?[a("FormItem",{attrs:{prop:"handler",label:"Username or Email"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"Username or Email"},model:{value:e.resetForm.handler,callback:function(t){e.$set(e.resetForm,"handler",t)},expression:"resetForm.handler"}})],1)]:[a("FormItem",{attrs:{prop:"password",label:"New Password"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"At least 6 characters",type:"password"},model:{value:e.resetForm.password,callback:function(t){e.$set(e.resetForm,"password",t)},expression:"resetForm.password"}})],1),a("FormItem",{attrs:{prop:"confirmPassword",label:"Confirm New Password"}},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"Be same as your new password",type:"password"},model:{value:e.resetForm.confirmPassword,callback:function(t){e.$set(e.resetForm,"confirmPassword",t)},expression:"resetForm.confirmPassword"}})],1)],a("FormItem",{attrs:{prop:"captcha",label:"Captcha"}},[a("div",{staticClass:"captcha-code"},[a("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"Click to get captcha"},on:{"on-focus":e.onCaptchaInputFocus},model:{value:e.resetForm.captcha,callback:function(t){e.$set(e.resetForm,"captcha",t)},expression:"resetForm.captcha"}})],1),a("div",{staticClass:"captcha-img"},[a("Tooltip",{attrs:{content:"Click to refresh",placement:"right"}},[a("img",{attrs:{src:e.captchaImg},on:{click:e.getCaptcha}})])],1)])],2)],1),a("div",{staticClass:"bottom"},[a("div",{staticClass:"btns"},[a("Button",{attrs:{type:"text",loading:e.btnResetLoading},on:{click:function(t){return e.handleReset("resetForm")}}},[e._v("Reset")])],1)])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",[e._v("Reset your password")])])}],o=(a("c975"),a("d3b7"),a("ac1f"),a("5319"),a("7c15")),c={data:function(){var e=this,t=function(t,a,r){""!==a&&e.$refs.resetForm.validateField("confirmPassword"),r()},a=function(t,a,r){a!==e.resetForm.password&&r(new Error("Password does not match")),r()};return{resetForm:{handler:"",captcha:"",password:"",confirmPassword:""},resetRules:{handler:[{required:!0,trigger:"blur"}],captcha:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",min:6,max:32},{validator:t,trigger:"blur"}],confirmPassword:[{required:!0,validator:a,trigger:"change"}]},btnResetLoading:!1,captchaId:"",captchaImg:"",token:"",apply:!0}},methods:{handleReset:function(e){var t=this;this.$refs[e].validate((function(e){if(e)if(t.apply){var a={username:t.resetForm.handler,email:t.resetForm.handler,captcha:t.resetForm.captcha,captchaId:t.captchaId};-1!==t.resetForm.handler.indexOf("@")?delete a.username:delete a.email,t.btnResetLoading=!0,o["a"].forgetPassword(a).then((function(e){t.$Message.success("重置密码链接已发送到 ".concat(e))})).catch((function(e){t.$Message.error(e.message),t.getCaptcha()})).finally((function(){t.resetForm.handler="",t.resetForm.captcha="",t.btnResetLoading=!1}))}else{var r={token:t.token,password:t.resetForm.password,captcha:t.resetForm.captcha,captchaId:t.captchaId};t.btnResetLoading=!0,o["a"].resetPassword(r).then((function(e){t.$Message.success({content:"Password resetted, please login",onClose:function(){return t.$router.replace({name:"login"})}})})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnResetLoading=!1}))}}))},onCaptchaInputFocus:function(){this.captchaId||this.getCaptcha()},getCaptcha:function(){var e=this;o["a"].getCaptcha().then((function(t){e.captchaId=t.captchaId,e.captchaImg=t.captcha}))}},mounted:function(){this.$route.query.token&&(this.token=this.$route.query.token,this.apply=!1,this.$Message.success("Reset your password"))}},n=c,i=(a("9bfe"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"3f80f3c0",null);t["default"]=l.exports},"9bfe":function(e,t,a){"use strict";var r=a("406c"),s=a.n(r);s.a},c975:function(e,t,a){"use strict";var r=a("23e7"),s=a("4d64").indexOf,o=a("a640"),c=a("ae40"),n=[].indexOf,i=!!n&&1/[1].indexOf(1,-0)<0,l=o("indexOf"),d=c("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:i||!l||!d},{indexOf:function(e){return i?n.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f7242f80.1e67bed7.js.map