{"version":3,"sources":["webpack:///./src/views/user/Register.vue?e63f","webpack:///src/views/user/Register.vue","webpack:///./src/views/user/Register.vue?2c12","webpack:///./src/views/user/Register.vue","webpack:///./src/components/form/register/AccountRegisterForm.vue?20d6","webpack:///src/components/form/register/AccountRegisterForm.vue","webpack:///./src/components/form/register/AccountRegisterForm.vue?c851","webpack:///./src/components/form/register/AccountRegisterForm.vue","webpack:///./src/views/user/Register.vue?0193","webpack:///./src/components/form/register/AccountRegisterForm.vue?3277"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","on","handleRegister","attrs","staticStyle","$event","$router","replace","name","_v","_s","message","staticRenderFns","components","data","apply","methods","mounted","$route","query","token","api","component","ref","registerForm","registerRules","model","value","callback","$$v","$set","expression","onCaptchaInputFocus","captchaImg","getCaptcha","_e","btnRegisterLoading","registerText","props","type","String","default","ret","Error","username","email","password","confirmPassword","studentId","captcha","captchaId","resetCaptcha","$refs","validate","valid","apiName"],"mappings":"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","file":"js/chunk-0586bea7.a5ead1ce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.apply)?_c('div',{staticClass:\"box clearfix\"},[_c('div',{staticClass:\"registerDiv\"},[_vm._m(0),_c('div',{staticClass:\"registerForm\"},[_c('AccountRegisterForm',{on:{\"on-success\":_vm.handleRegister}})],1)])]):_c('div',{staticClass:\"container activation hover\"},[_c('Tooltip',{attrs:{\"content\":\"Return to Home\",\"placement\":\"bottom\"}},[_c('Icon',{attrs:{\"type\":\"md-checkmark-circle-outline\",\"size\":\"30\"}}),_c('h1',{staticStyle:{\"display\":\"inline\"},on:{\"click\":function($event){return _vm.$router.replace({ name: 'home' })}}},[_vm._v(\" \"+_vm._s(_vm.message))])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"registerSwitchDiv\"},[_c('div',{staticClass:\"accountRegister\"},[_c('div',{staticClass:\"selectedType\"},[_vm._v(\"Register Account\")])])])}]\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2021 the original author or authors.\n\n   Licensed under the General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/gpl-3.0.en.html\n -->\n\n<template>\n    <div class=\"box clearfix\" v-if=\"apply\">\n      <div class=\"registerDiv\">\n        <div class=\"registerSwitchDiv\">\n          <div class=\"accountRegister\">\n            <div class=\"selectedType\">Register Account</div>\n          </div>\n        </div>\n        <div class=\"registerForm\">\n          <AccountRegisterForm @on-success=\"handleRegister\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"container activation hover\" v-else>\n      <Tooltip  content=\"Return to Home\" placement=\"bottom\">\n        <Icon type=\"md-checkmark-circle-outline\" size=\"30\"/>\n        <h1 style=\"display: inline\" @click=\"$router.replace({ name: 'home' })\">&nbsp; {{ message }}</h1>\n      </Tooltip>\n    </div>\n</template>\n\n<script>\nimport api from '_u/api';\nimport AccountRegisterForm from '_c/form/register/AccountRegisterForm';\n\nexport default {\n  components: { AccountRegisterForm },\n  data: function () {\n    return {\n      apply: true,\n      message: ''\n    };\n  },\n  methods: {\n    handleRegister: function() {\n      this.apply = false;\n      this.message = 'Success, check your email for activation';\n    }\n  },\n  mounted: function() {\n    if (this.$route.query.token) {\n      api.verifyEmail(this.$route.query.token)\n        .then(_ => {\n          this.apply = false;\n          this.message = 'You have activated';\n        }).catch(err => {\n          this.$Message.error(err.message);\n        });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n@sdu-red: #d84a2b;\n.box {\n  width: 420px;\n  margin: 0 auto;\n  border: 1px solid rgb(185, 185, 185);\n  background-color: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 10px #f5f7f9;\n}\n\n.registerDiv {\n  background: #fff;\n  border-radius: 4px\n}\n\n.registerSwitchDiv {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-around;\n  height: 65px;\n  border-bottom: 1px solid #DFE1E6;\n  font-size: 18px;\n  color: rgba(0, 0, 0, .5);\n  cursor: pointer;\n\n  .intervalDiv {\n    height: 20px;\n    border-right: 1px solid #DFE1E6\n  }\n}\n\n.registerSwitchDiv .accountRegister {\n  flex-grow: 1;\n  text-align: center;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  div {\n    height: calc(100% - 5px);\n    display: flex;\n    align-items: center;\n    border-bottom: 3px solid transparent;\n    border-top: 3px solid transparent;\n  }\n}\n\n.registerSwitchDiv div.selectedType {\n  border-bottom: 3px solid @sdu-red;\n  color: @sdu-red;\n}\n\n.activation {\n  text-align: center;\n}\n\n.registerForm {\n  margin: 20px 10px;\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=2a8b75fd&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=2a8b75fd&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a8b75fd\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"center\"},[_c('Form',{ref:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.registerRules,\"label-position\":\"right\"}},[_c('FormItem',{attrs:{\"prop\":\"username\",\"label\":\"Username\"}},[_c('Input',{staticStyle:{\"width\":\"280px\"},attrs:{\"placeholder\":\"Your login handler\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}})],1),_c('FormItem',{attrs:{\"prop\":\"email\",\"label\":\"Email\"}},[_c('Input',{staticStyle:{\"width\":\"280px\"},attrs:{\"type\":\"email\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1),_c('FormItem',{attrs:{\"prop\":\"password\",\"label\":\"Password\"}},[_c('Input',{staticStyle:{\"width\":\"280px\"},attrs:{\"placeholder\":\"At least 6 characters\",\"type\":\"password\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('FormItem',{attrs:{\"prop\":\"confirmPassword\",\"label\":\"Confirm Password\"}},[_c('Input',{staticStyle:{\"width\":\"280px\"},attrs:{\"placeholder\":\"Same as your password\",\"type\":\"password\"},model:{value:(_vm.registerForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirmPassword\", $$v)},expression:\"registerForm.confirmPassword\"}})],1),(_vm.token === '')?_c('div',[_c('FormItem',{attrs:{\"label\":\"Student ID\"}},[_c('Input',{staticStyle:{\"width\":\"280px\"},model:{value:(_vm.registerForm.studentId),callback:function ($$v) {_vm.$set(_vm.registerForm, \"studentId\", $$v)},expression:\"registerForm.studentId\"}})],1),_c('FormItem',{attrs:{\"prop\":\"captcha\",\"label\":\"Captcha\"}},[_c('div',{staticClass:\"captcha-code\"},[_c('Input',{staticStyle:{\"width\":\"280px\"},attrs:{\"placeholder\":\"Click to get captcha\"},on:{\"on-focus\":_vm.onCaptchaInputFocus},model:{value:(_vm.registerForm.captcha),callback:function ($$v) {_vm.$set(_vm.registerForm, \"captcha\", $$v)},expression:\"registerForm.captcha\"}})],1),_c('div',{staticClass:\"captcha-img\"},[_c('Tooltip',{attrs:{\"content\":\"Click to refresh\",\"placement\":\"right\"}},[_c('img',{attrs:{\"src\":_vm.captchaImg},on:{\"click\":_vm.getCaptcha}})])],1)])],1):_vm._e()],1)],1),_c('div',{staticClass:\"btnGroup\",staticStyle:{\"margin-top\":\"-1px\"}},[_c('Button',{staticClass:\"btn\",attrs:{\"type\":\"error\",\"long\":\"\",\"size\":\"large\",\"loading\":_vm.btnRegisterLoading},on:{\"click\":_vm.handleRegister}},[_vm._v(_vm._s(_vm.registerText))]),(_vm.token === '')?_c('Button',{staticClass:\"btn\",attrs:{\"long\":\"\",\"to\":{ name: 'login' }}},[_vm._v(\"Already registered\")]):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2021 the original author or authors.\n\n   Licensed under the General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/gpl-3.0.en.html\n -->\n\n<template>\n  <div>\n    <div class=\"center\">\n      <Form\n        ref=\"registerForm\"\n        :model=\"registerForm\"\n        :rules=\"registerRules\"\n        label-position=\"right\">\n        <FormItem prop=\"username\" label=\"Username\">\n          <Input\n            v-model=\"registerForm.username\"\n            placeholder=\"Your login handler\"\n            style=\"width: 280px\" />\n        </FormItem>\n        <FormItem prop=\"email\" label=\"Email\">\n          <Input v-model=\"registerForm.email\" style=\"width: 280px\" type=\"email\" />\n        </FormItem>\n        <FormItem prop=\"password\" label=\"Password\">\n          <Input\n            v-model=\"registerForm.password\"\n            placeholder=\"At least 6 characters\"\n            style=\"width: 280px\"\n            type=\"password\" />\n        </FormItem>\n        <FormItem prop=\"confirmPassword\" label=\"Confirm Password\">\n          <Input\n            v-model=\"registerForm.confirmPassword\"\n            placeholder=\"Same as your password\"\n            style=\"width: 280px\"\n            type=\"password\" />\n        </FormItem>\n        <div v-if=\"token === ''\">\n          <FormItem label=\"Student ID\">\n            <Input v-model=\"registerForm.studentId\" style=\"width: 280px\" />\n          </FormItem>\n          <FormItem prop=\"captcha\" label=\"Captcha\">\n            <div class=\"captcha-code\">\n              <Input\n                v-model=\"registerForm.captcha\"\n                placeholder=\"Click to get captcha\"\n                style=\"width: 280px\"\n                @on-focus=\"onCaptchaInputFocus\" />\n            </div>\n            <div class=\"captcha-img\">\n              <Tooltip content=\"Click to refresh\" placement=\"right\">\n                <img :src=\"captchaImg\" @click=\"getCaptcha\"/>\n              </Tooltip>\n            </div>\n          </FormItem>\n        </div>\n      </Form>\n    </div>\n    <div class=\"btnGroup\" style=\"margin-top: -1px\">\n      <Button class=\"btn\" type=\"error\" long size=\"large\"\n              @click=\"handleRegister\"\n              :loading=\"btnRegisterLoading\">{{ registerText }}</Button>\n      <Button v-if=\"token === ''\" class=\"btn\" long :to=\"{ name: 'login' }\">Already registered</Button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '_u/api';\n\nexport default {\n  name: 'AccountRegisterForm',\n  props: {\n    token: {\n      type: String,\n      default: ''\n    },\n    registerText: {\n      type: String,\n      default: 'Register'\n    }\n  },\n  data: function () {\n    const validateUsername = (rule, value, callback) => {\n      // 检查用户名是否存在\n      api.isExist({ username: value }).then(ret => {\n        if (ret) {\n          callback(new Error('already exists'));\n        } else {\n          callback();\n        }\n      }).catch(err => {\n        this.$Message.error(err.message);\n      });\n    };\n    const validateEmail = (rule, value, callback) => {\n      // 检查邮箱是否已被使用\n      api.isExist({ email: value }).then(ret => {\n        if (ret) {\n          callback(new Error('already exists'));\n        } else {\n          callback();\n        }\n      }).catch(err => {\n        this.$Message.error(err.message);\n      });\n    };\n    const validatePass = (rule, value, callback) => {\n      if (value !== '') {\n        this.$refs.registerForm.validateField('confirmPassword');\n      }\n      callback();\n    };\n    const validateConfirmPass = (rule, value, callback) => {\n      if (value !== this.registerForm.password) {\n        callback(new Error('Password does not match'));\n      }\n      callback();\n    };\n    return {\n      registerForm: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        studentId: '',\n        captcha: ''\n      },\n      registerRules: {\n        username: [\n          { required: true, trigger: 'blur' },\n          { validator: validateUsername, trigger: 'blur' }\n        ],\n        email: [\n          { required: true, type: 'email', trigger: 'blur' },\n          { validator: validateEmail, trigger: 'blur' }\n        ],\n        password: [\n          { required: true, trigger: 'blur', min: 6, max: 32 },\n          { validator: validatePass, trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, validator: validateConfirmPass, trigger: 'change' }\n        ],\n        captcha: [{ required: true, trigger: 'blur', min: 1, max: 10 }]\n      },\n      captchaId: 0,\n      captchaImg: '',\n      btnRegisterLoading: false\n    };\n  },\n  methods: {\n    getCaptcha: function() {\n      // 模拟获得图形验证码\n      api.getCaptcha().then(ret => {\n        this.captchaId = ret.captchaId;\n        this.captchaImg = ret.captcha;\n      }).catch(err => {\n        this.$Message.error(err.message);\n      });\n    },\n    resetCaptcha: function() {\n      this.registerForm.captcha = '';\n      this.getCaptcha();\n    },\n    onCaptchaInputFocus: function() {\n      if (!this.captchaId) {\n        this.getCaptcha();\n      }\n    },\n    handleRegister: function() {\n      this.$refs.registerForm.validate((valid) => {\n        if (valid) {\n          const data = Object.assign({}, this.registerForm);\n          let apiName = 'register';\n          delete data.confirmPassword;\n\n          if (this.token === '') {\n            data.captchaId = this.captchaId;\n          } else {\n            delete data.studentId;\n            delete data.captcha;\n            delete data.captchaId;\n            data.token = this.token;\n            apiName = 'thirdPartyRegister';\n          }\n\n          this.btnRegisterLoading = true;\n          api[apiName](data).then(ret => {\n            this.$emit('on-success', ret);\n            this.$refs.registerForm.resetFields();\n          }).catch(err => {\n            this.$Message.error(err.message);\n          }).finally(() => {\n            this.btnRegisterLoading = false;\n            if (this.token === '') {\n              this.resetCaptcha();\n            }\n          })\n          return;\n        }\n\n        if (this.token === '') {\n          this.resetCaptcha();\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@sdu-red: #d84a2b;\n/deep/.ivu-form-item-label {\n  font-weight: 500;\n}\n\n.btn {\n  margin: 3px auto;\n  &:hover {\n    color: @sdu-red;\n    border-color: @sdu-red;\n  }\n}\n\n/deep/ .ivu-btn-error {\n  background-color: @sdu-red;\n  border-color: @sdu-red;\n  &:hover {\n    color: #fff;\n  }\n}\n\n.captcha-img {\n  margin-top: 5px;\n  :hover {\n    cursor: pointer;\n  }\n}\n\n.btnGroup {\n  width: 280px;\n  margin: 15px auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountRegisterForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountRegisterForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountRegisterForm.vue?vue&type=template&id=66774b84&scoped=true&\"\nimport script from \"./AccountRegisterForm.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountRegisterForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AccountRegisterForm.vue?vue&type=style&index=0&id=66774b84&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66774b84\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=2a8b75fd&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=2a8b75fd&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountRegisterForm.vue?vue&type=style&index=0&id=66774b84&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountRegisterForm.vue?vue&type=style&index=0&id=66774b84&lang=less&scoped=true&\""],"sourceRoot":""}