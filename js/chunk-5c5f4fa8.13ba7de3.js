(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c5f4fa8"],{"06ab":function(e,t,s){"use strict";var r=s("19df"),a=s.n(r);a.a},"07b2":function(e,t,s){"use strict";var r=s("fe27"),a=s.n(r);a.a},1010:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("Row",[s("Col",{attrs:{span:"16"}},[s("div",{staticStyle:{"margin-right":"30px"}},[s("UserProfile"),e.isVerified?s("UserPassword",{staticStyle:{margin:"20px 0"}}):e._e(),s("UserEmail")],1)]),s("Col",{attrs:{span:"8"}},[s("Card",{staticClass:"profile clearfix",attrs:{padding:20,"dis-hover":""}},[s("div",{staticClass:"avatar-box"},[s("img",{attrs:{src:e.avatar}})]),s("div",{staticClass:"statistic clearfix"},[s("div",[s("span",[e._v("Submissions")]),s("p",{staticClass:"emphasis"},[e._v(e._s(e.profile.submissions||0))])]),s("div",[s("span",[e._v("Solved")]),s("span",{staticClass:"emphasis"},[e._v(e._s(e.profile.solved||0))])]),s("div",[s("span",[e._v("Unsolved")]),s("span",{staticClass:"emphasis"},[e._v(e._s(e.profile.unsolved||0))])])])])],1)],1)],1)},a=[],o=s("5530"),i=s("2f62"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{attrs:{title:"Your Profile",padding:0,"dis-hover":""}},[s("div",{staticClass:"form"},[s("Form",{ref:"profileForm",attrs:{model:e.profileForm,rules:e.profileRules,"label-position":"right","label-width":100}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"Username"}},[s("span",[e._v(e._s(e.profile.username))])]),s("FormItem",{attrs:{label:"Nickname"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.nickname,callback:function(t){e.$set(e.profileForm,"nickname",t)},expression:"profileForm.nickname"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),s("FormItem",{attrs:{label:"Student ID"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.studentId,callback:function(t){e.$set(e.profileForm,"studentId",t)},expression:"profileForm.studentId"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),s("FormItem",{attrs:{label:"Confirm Password",prop:"password"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.profileForm.password,callback:function(t){e.$set(e.profileForm,"password",t)},expression:"profileForm.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s("FormItem",[s("Button",{attrs:{disabled:!e.isVerified},on:{click:function(t){return e.handleProfileUpdate("profileForm")}}},[e._v("Update")])],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"Gender"}},[s("RadioGroup",{attrs:{border:""},model:{value:e.profileForm.gender,callback:function(t){e.$set(e.profileForm,"gender",t)},expression:"profileForm.gender"}},[s("Radio",{attrs:{label:"2"}},[s("Icon",{attrs:{type:"md-help"}})],1),s("Radio",{attrs:{label:"1"}},[s("Icon",{attrs:{type:"md-male"}})],1),s("Radio",{attrs:{label:"0"}},[s("Icon",{attrs:{type:"md-female"}})],1)],1)],1),s("FormItem",{attrs:{label:"Phone"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"text"},model:{value:e.profileForm.phone,callback:function(t){e.$set(e.profileForm,"phone",t)},expression:"profileForm.phone"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-call-outline"},slot:"prepend"})],1)],1),s("FormItem",{attrs:{label:"Email"}},[e.isVerified?s("Tooltip",{attrs:{content:"You are verified",placement:"right"}},[s("span",{staticClass:"email-verified",domProps:{textContent:e._s(e.profile.email)}})]):s("Tooltip",{attrs:{content:"Click to send an email",placement:"right"}},[s("span",{staticClass:"email-unverified",domProps:{textContent:e._s(e.profile.email)},on:{click:e.sendEmail}})])],1),s("FormItem",{attrs:{label:"Roles"}},e._l(e.profile.roles,(function(t){return s("span",{key:t,staticClass:"roles"},[s("Tag",{attrs:{color:e.USER_ROLE[t].color}},[e._v(e._s(t))])],1)})),0)],1)],1)],1)],1)])},l=[],d=(s("d3b7"),s("25f0"),s("7c15")),p=s("c9d9"),c={data:function(){return{profileForm:{nickname:"",studentId:"",gender:"",phone:"",password:""},profileRules:{password:[{required:!0,trigger:"blur",min:6,max:32}]}}},methods:{handleProfileUpdate:function(e){var t=this;this.$refs[e].validate((function(e){e&&d["a"].updateProfile(t.profileForm).then((function(e){d["a"].getProfile(),t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)}))}))},sendEmail:function(){var e=this;this.isVerified||d["a"].sendVerificationEmail(this.username).then((function(t){e.$Message.success("An verification email has sent to ".concat(t.data))})).catch((function(t){e.$Message.error(t.message)}))}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["d"])("user",["profile"])),Object(i["c"])("user",["isVerified","username"])),{},{USER_ROLE:function(){return p["f"]}}),mounted:function(){var e=this;d["a"].getProfile((function(t){e.profileForm=Object.assign({},t),e.profileForm.gender=e.profileForm.gender.toString()}))}},m=c,u=(s("4f23"),s("2877")),f=Object(u["a"])(m,n,l,!1,null,"398ed51e",null),w=f.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{attrs:{title:"Change Your Password",padding:0,"dis-hover":""}},[s("div",{staticClass:"form"},[s("Form",{ref:"passwordForm",attrs:{model:e.passwordForm,rules:e.passwordRules,"label-position":"right","label-width":105}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"Old Password",prop:"oldPassword"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s("FormItem",[s("Button",{on:{click:function(t){return e.handlePasswordUpdate("passwordForm")}}},[e._v("Update")])],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"New Password",prop:"newPassword"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.newPassword,callback:function(t){e.$set(e.passwordForm,"newPassword",t)},expression:"passwordForm.newPassword"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s("FormItem",{attrs:{label:"Confirm New Password",prop:"confirmNewPassword"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.passwordForm.confirmNewPassword,callback:function(t){e.$set(e.passwordForm,"confirmNewPassword",t)},expression:"passwordForm.confirmNewPassword"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1)],1)],1)],1)],1)])},h=[],v={data:function(){var e=this,t=function(t,s,r){""!==s&&e.$refs.passwordForm.validateField("confirmNewPassword"),r()},s=function(t,s,r){s!==e.passwordForm.newPassword&&r(new Error("Password does not match")),r()};return{passwordForm:{oldPassword:"",newPassword:"",confirmNewPassword:""},passwordRules:{oldPassword:[{required:!0,trigger:"blur",min:6,max:32}],newPassword:[{required:!0,trigger:"blur",min:6,max:32},{validator:t,trigger:"blur"}],confirmNewPassword:[{required:!0,validator:s,trigger:"change"}]}}},methods:{handlePasswordUpdate:function(e){var t=this;this.$refs[e].validate((function(s){if(s){var r={password:t.passwordForm.oldPassword,newPassword:t.passwordForm.newPassword};d["a"].updateProfile(r).then((function(e){t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.$refs[e].resetFields()}))}}))}}},b=v,g=(s("07b2"),Object(u["a"])(b,F,h,!1,null,"438970fe",null)),P=g.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{attrs:{title:"Change Your Email",padding:0,"dis-hover":""}},[s("div",{staticClass:"form"},[s("Form",{ref:"emailForm",attrs:{model:e.emailForm,rules:e.emailRules,"label-position":"right","label-width":105}},[s("Row",[s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"Password",prop:"password"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:e.emailForm.password,callback:function(t){e.$set(e.emailForm,"password",t)},expression:"emailForm.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s("FormItem",[s("Button",{on:{click:function(t){return e.handleEmailUpdate("emailForm")}}},[e._v("Update")])],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"New Email",prop:"newEmail"}},[s("Input",{staticStyle:{width:"200px"},attrs:{type:"email"},model:{value:e.emailForm.newEmail,callback:function(t){e.$set(e.emailForm,"newEmail",t)},expression:"emailForm.newEmail"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-mail-outline"},slot:"prepend"})],1)],1)],1)],1)],1)],1)])},x=[],y={data:function(){var e=function(e,t,s){d["a"].isExist({email:t}).then((function(e){s()}),(function(e){s(new Error("already exists"))}))};return{emailForm:{password:"",newEmail:""},emailRules:{password:[{required:!0,trigger:"blur",min:6,max:32}],newEmail:[{required:!0,type:"email",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{handleEmailUpdate:function(e){var t=this;this.$refs[e].validate((function(s){s&&d["a"].updateProfile(t.emailForm).then((function(e){d["a"].getProfile(),t.$Message.success("Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.$refs[e].resetFields()}))}))}}},C=y,_=(s("06ab"),Object(u["a"])(C,I,x,!1,null,"6d66ea68",null)),k=_.exports,$={components:{UserProfile:w,UserPassword:P,UserEmail:k},computed:Object(o["a"])(Object(o["a"])({},Object(i["d"])("user",["profile"])),Object(i["c"])("user",["avatar","isVerified"]))},E=$,U=(s("a037"),Object(u["a"])(E,r,a,!1,null,"027e1a4e",null));t["default"]=U.exports},"19df":function(e,t,s){},"4f23":function(e,t,s){"use strict";var r=s("7892"),a=s.n(r);a.a},7892:function(e,t,s){},a037:function(e,t,s){"use strict";var r=s("a9aa"),a=s.n(r);a.a},a9aa:function(e,t,s){},fe27:function(e,t,s){}}]);
//# sourceMappingURL=chunk-5c5f4fa8.13ba7de3.js.map