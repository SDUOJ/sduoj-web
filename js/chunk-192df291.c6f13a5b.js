(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-192df291"],{"1abe":function(e,s,t){},3254:function(e,s,t){},"6ef6":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("table",{staticClass:"scoreboard"},[t("colgroup",[t("col",{attrs:{id:"scorerank"}}),e.showFlags?t("col",{attrs:{id:"scoreflags"}}):t("col"),t("col",{attrs:{id:"scoreusername"}})]),e._m(0),t("colgroup",[e.showSubmissions?e._l(e.contest.problems,(function(e){return t("col",{key:e.problemCode,staticClass:"scoreprob"})})):e._e()],2),t("thead",[t("tr",{staticClass:"scoreheader"},[t("th",{staticStyle:{padding:"0 10px"},attrs:{title:"rank",scope:"col"}},[e._v("RANK")]),t("th",{staticStyle:{padding:"0 10px"},attrs:{title:"username",colspan:"2",scope:"col"}},[e._v("PARTICIPANT")]),t("th",{staticStyle:{padding:"0 10px"},attrs:{title:"# solved / penalty or score",colspan:"2",scope:"col"}},[e._v("SCORE")]),e._l(e.contest.problems,(function(s){return t("th",{key:s.problemCode,attrs:{title:"problem "+s.problemTitle,scope:"col"}},[t("router-link",{attrs:{to:{name:"contest-problem",params:{problemCode:s.problemCode}}}},[e._v(" "+e._s(e._f("contestProblemId")(s.problemCode))+" "),s.ballonColor?t("div",{staticClass:"circle",style:"background: "+s.ballonColor+";"}):e._e(),t("div",{staticClass:"problempoints"},[e._v(" "+e._s(s.acceptNum||0)+" / "+e._s(s.submitNum||0)+" ")])])],1)}))],2)]),t("tbody",[e._l(e.likedScores,(function(s,o){return t("tr",{key:-s.user.userId,class:{sortorderswitch:0===o,scoreliked:e.likedScoresMap[s.user.userId],scorethisisme:s.user.userId===e.profile.userId},style:o===e.likedScores.length-1?"border-bottom: thick solid black;":"",attrs:{id:"user:"+s.user.userId}},[t("td",{staticClass:"scorepl"},[e._v(e._s(e.displayRank?s.rank:"?"))]),t("td",{staticClass:"scoreaf",staticStyle:{background:"#ffffff"}},[e.likedScoresMap[s.user.userId]?t("Icon",{staticClass:"heart fas",attrs:{type:"md-heart"},on:{click:function(s){return e.setUserLiked(o,!1)}}}):t("Icon",{staticClass:"heart",attrs:{type:"md-heart-outline"},on:{click:function(s){return e.setUserLiked(o,!0)}}})],1),t("td",{staticClass:"scoretn",staticStyle:{background:"#ffffff"},attrs:{title:s.user.username}},[t("span",{staticClass:"forceWidth"},[e._v(e._s(s.user.username))]),s.user.affiliation?t("span",{staticClass:"forceWidth univ"},[e._v(e._s(s.user.affiliation))]):e._e()]),t("td",{staticClass:"scorenc"},[e._v(e._s(s.solved))]),e.contestMode===e.CONTEST_MODE.ACM?t("td",{staticClass:"scorett"},[e._v(e._s(e._f("time2minutes")(s.score)))]):t("td",{staticClass:"scorett"},[e._v(e._s(s.score))]),e._l(s.problemResults,(function(o){return t("td",{key:o.problemCode,staticClass:"score_cell"},[e.contestMode===e.CONTEST_MODE.ACM?t("a",[o.numSubmissions+o.numSubmissionsPending>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(e._f("time2minutes")(o.time))+" "),t("span",[e._v(e._s(o.numSubmissions+o.numSubmissionsPending===1?"1 try":o.numSubmissions+o.numSubmissionsPending+" tries"))])]):e._e()]):e.contestMode===e.CONTEST_MODE.OI?t("a",[o.numSubmissions>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(o.score)+" ")]):e._e()]):e.contestMode===e.CONTEST_MODE.IOI?t("a",[o.numSubmissions>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(o.score)+" "),t("span",[e._v(e._s(e._f("time2minutes")(o.time)))])]):e._e()]):e._e()])}))],2)})),e._l(e.scores,(function(s,o){return t("tr",{key:s.user.userId,class:{sortorderswitch:0===o,scorethisisme:s.user.userId===e.profile.userId,scoreliked:e.likedScoresMap[s.user.userId]},attrs:{id:"user:"+s.user.userId}},[t("td",{staticClass:"scorepl"},[e._v(e._s(e.displayRank?s.rank:"?"))]),t("td",{staticClass:"scoreaf",staticStyle:{background:"#ffffff"}},[e.likedScoresMap[s.user.userId]?t("Icon",{staticClass:"heart fas",attrs:{type:"md-heart"},on:{click:function(s){return e.setUserLiked(o,!1)}}}):t("Icon",{staticClass:"heart",attrs:{type:"md-heart-outline"},on:{click:function(s){return e.setUserLiked(o,!0)}}})],1),t("td",{staticClass:"scoretn",staticStyle:{background:"#ffffff"},attrs:{title:s.user.username}},[t("span",{staticClass:"forceWidth"},[e._v(e._s(s.user.username))]),s.user.affiliation?t("span",{staticClass:"forceWidth univ"},[e._v(e._s(s.user.affiliation))]):e._e()]),t("td",{staticClass:"scorenc"},[e._v(e._s(s.solved))]),e.contestMode===e.CONTEST_MODE.ACM?t("td",{staticClass:"scorett"},[e._v(e._s(e._f("time2minutes")(s.score)))]):t("td",{staticClass:"scorett"},[e._v(e._s(s.score))]),e._l(s.problemResults,(function(o){return t("td",{key:o.problemCode,staticClass:"score_cell"},[e.contestMode===e.CONTEST_MODE.ACM?t("a",[o.numSubmissions+o.numSubmissionsPending>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(e._f("time2minutes")(o.time))+" "),t("span",[e._v(e._s(o.numSubmissions+o.numSubmissionsPending===1?"1 try":o.numSubmissions+o.numSubmissionsPending+" tries"))])]):e._e()]):e.contestMode===e.CONTEST_MODE.OI?t("a",[o.numSubmissions>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(o.score)+" ")]):e._e()]):e.contestMode===e.CONTEST_MODE.IOI?t("a",[o.numSubmissions>0?t("div",{class:o.css,on:{click:function(t){return e.showAllSubmissions(s.user.username,o.problemCode)}}},[e._v(" "+e._s(o.score)+" "),t("span",[e._v(e._s(e._f("time2minutes")(o.time)))])]):e._e()]):e._e()])}))],2)}))],2)]),t("Modal",{attrs:{width:"900px","footer-hide":"",closable:!1},model:{value:e.modelSubmissions,callback:function(s){e.modelSubmissions=s},expression:"modelSubmissions"}},[t("SubmissionList",{attrs:{size:"small",filter:e.showOnesAllSubmission,bannedKey:["problemCode","username","problemTitle"]},on:{"on-cell-click":e.onSubmissionListCellClick}})],1),t("Modal",{attrs:{width:"1000px","footer-hide":"",closable:!1},model:{value:e.modelSubmissionDetail,callback:function(s){e.modelSubmissionDetail=s},expression:"modelSubmissionDetail"}},[t("SubmissionDetailView",{attrs:{"submission-id":e.submissionId}})],1)],1)},i=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("colgroup",[t("col",{attrs:{id:"scoresolv"}}),t("col",{attrs:{id:"scoretotal"}})])}],n=(t("d3b7"),t("25f0"),t("5530")),r=t("bf9c"),a=t("3452"),l=t("bedf"),c=t("c9d9"),u=t("2f62"),d=(t("1abe"),{name:"ContestRank",components:{SubmissionList:r["a"],SubmissionDetailView:a["default"]},data:function(){return{modelSubmissions:!1,modelSubmissionDetail:!1,showSubmissions:!0,showFlags:!1,displayRank:!0,showOnesAllSubmission:{username:"",problemCode:""},submissionId:""}},filters:{contestProblemId:function(e){return Object(l["a"])(e)},time2minutes:function(e){return 0===e?"\b":parseInt(e/60/1e3).toString()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])("user",["isAdmin"])),Object(u["d"])("contest",["contest","problems","likedScoresMap"])),Object(u["c"])("contest",["contestId","contestMode","contestStatus","scores","likedScores"])),Object(u["c"])("user",["profile"])),{},{CONTEST_MODE:function(){return c["a"]}}),methods:{setUserLiked:function(e,s){this.$store.commit("contest/setScoreLiked",{index:e,status:s})},showAllSubmissions:function(e,s){this.contestStatus!==c["c"].FINISHED&&e!==this.profile.username||(this.showOnesAllSubmission={username:e,problemCode:s},this.modelSubmissions=!0)},onSubmissionListCellClick:function(e,s){switch(s.key){case"submissionId":case"judgeResult":(e.username===this.username||this.isAdmin||e.isPublic)&&(this.submissionId=e.submissionId,this.modelSubmissionDetail=!0);break}}}}),m=d,f=t("2877"),b=Object(f["a"])(m,o,i,!1,null,"200fd57c",null);s["default"]=b.exports},bf9c:function(e,s,t){"use strict";var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("Card",{staticClass:"clearfix",attrs:{"dis-hover":"",padding:0}},[t("Table",{staticClass:"data-table",attrs:{size:e.size,"show-header":e.showHeader,"no-data-text":e.noDataText,columns:e.filteredColumns,data:e.submissions,loading:e.loading},on:{"on-selection-change":e.onSelectionChange,"on-sort-change":e.onSort,"on-cell-click":e.onCellClick},scopedSlots:e._u([{key:"id",fn:function(s){var o=s.row;return[t("span",{staticClass:"underline"},[e._v(e._s(o.submissionId))])]}},{key:"title",fn:function(s){var o=s.row;return[t("span",{staticClass:"underline"},[e._v(e._s(o.problemTitle))])]}},{key:"judge-result",fn:function(e){var s=e.row;return[t("JudgeResult",{attrs:{result:s.judgeResult}})]}},{key:"time",fn:function(s){var o=s.row;return[t("span",{staticClass:"time"},[e._v(e._s(o.usedTime||0))])]}},{key:"mem",fn:function(s){var o=s.row;return[t("span",{staticClass:"mem"},[e._v(e._s(o.usedMemory||0))])]}},{key:"submit-time",fn:function(s){var o=s.row;return[t("Tooltip",{attrs:{content:e._f("timeformat")(o.gmtCreate,"yyyy-MM-DD HH:mm:ss"),transfer:""}},[t("span",[e._v(e._s(e._f("fromnow")(o.gmtCreate)))])])]}}])}),t("div",[e.doRejudge?t("div",{staticClass:"left btns"},[t("Button",{on:{click:e.onRejudge}},[t("Icon",{attrs:{type:"md-refresh"}}),e._v(" Rejudge")],1)],1):e._e(),t("div",{staticClass:"right pages"},[t("Page",{attrs:{size:"small","show-elevator":"","show-sizer":"",total:e.total,current:e.pageNow},on:{"update:current":function(s){e.pageNow=s},"on-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange}})],1)])],1)},i=[],n=(t("99af"),t("4de4"),t("caad"),t("d3b7"),t("2532"),t("2909")),r=t("5530"),a=t("0c79"),l=t("8035"),c=t("bedf"),u=t("7c15"),d=t("2f62"),m=t("4360"),f=t("c1df"),b=t.n(f),p={name:"SubmissionList",components:{JudgeResult:l["a"]},props:{size:{type:String,default:"default"},showHeader:{type:Boolean,default:!0},doRejudge:{type:Boolean,default:!1},noDataText:{type:String,default:""},bannedKey:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[{title:"#",key:"submissionId",minWidth:60,slot:"id"},{title:"Username",key:"username"},{title:"Problem Code",key:"problemCode",minWidth:15,render:function(e,s){if(m["a"].state.contest.contest.contestId)return e("strong",Object(c["a"])(s.row.problemCode));if(void 0!==s.row.problemCode){if(s.row.problemCode.length>20){var t=s.row.problemCode.substring(0,20)+"...";return e("Tooltip",{props:{placement:"top",maxWidth:"180"}},[e(a["a"],{class:"hover",props:{problemCode:t}}),e("span",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},s.row.problemCode)])}return e(a["a"],{class:"hover",props:{problemCode:s.row.problemCode}})}}},{title:"Title",key:"problemTitle",slot:"title"},{title:"Judge Result",key:"judgeResult",slot:"judge-result",minWidth:95},{title:"Time",slot:"time",sortable:!0,maxWidth:100},{title:"Memory",slot:"mem",sortable:!0,maxWidth:120},{title:"Template",key:"judgeTemplateTitle"},{title:"Submit Time",key:"gmtCreate",slot:"submit-time"}]}},filter:{type:Object,default:function(){return{username:"",problemCode:"",judgeResult:"",language:""}}}},filters:{timeformat:function(e,s){return"string"===typeof e&&(e=parseInt(e)),b()(new Date(e)).format(s)},fromnow:function(e){return"string"===typeof e&&(e=parseInt(e)),b()(new Date(e)).fromNow()}},data:function(){return{filteredColumns:[],submissions:[],selectedSubmissions:[],total:0,pageNow:1,pageSize:10,sortBy:"",ascending:!1,loading:!1}},computed:Object(r["a"])({},Object(d["c"])("contest",["contestId"])),methods:{onPageChange:function(e){this.pageNow=e},onPageSizeChange:function(e){this.pageSize=e},onSort:function(e){var s=e.key,t=e.order;"normal"===t?(this.sortBy="",this.ascending=!1):(this.sortBy=s,this.ascending="asc"===t)},onCellClick:function(e,s,t,o){this.$emit("on-cell-click",e,s,t,o)},onSelectionChange:function(e){this.selectedSubmissions=e},onRejudge:function(){this.$emit("on-rejudge",this.selectedSubmissions)},querySubmissionList:function(){var e=this;this.loading=!0,u["a"].getSubmissionList(Object(r["a"])(Object(r["a"])({},this.filter),{},{contestId:this.contestId,sortBy:this.sortBy,ascending:this.ascending,pageNow:this.pageNow,pageSize:this.pageSize})).then((function(s){e.submissions=s.rows,e.total=parseInt(e.pageSize)*parseInt(s.totalPage)})).finally((function(){return e.loading=!1}))}},watch:{filter:function(){this.querySubmissionList()},pageNow:function(){this.querySubmissionList()},pageSize:function(){this.querySubmissionList()},sortBy:function(){this.querySubmissionList()},ascending:function(){this.querySubmissionList()}},created:function(){var e=this,s=Object(n["a"])(this.columns);this.doRejudge&&(s=[{type:"selection",width:60,align:"center"}].concat(s)),this.filteredColumns=s.filter((function(s){return!e.bannedKey.includes(s.key)}))}},h=p,_=(t("dc46"),t("2877")),C=Object(_["a"])(h,o,i,!1,null,"bb46b7a4",null);s["a"]=C.exports},dc46:function(e,s,t){"use strict";var o=t("3254"),i=t.n(o);i.a}}]);
//# sourceMappingURL=chunk-192df291.c6f13a5b.js.map