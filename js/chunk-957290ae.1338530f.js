(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-957290ae"],{"0994":function(t,e,a){"use strict";var r=a("fd68"),o=a.n(r);o.a},1010:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("Row",[a("Col",{attrs:{span:"16"}},[a("div",{staticStyle:{"margin-right":"30px"}},[a("UserProfile"),a("UserPassword",{staticStyle:{margin:"20px 0"}}),a("UserEmail")],1)]),a("Col",{attrs:{span:"8"}},[a("Card",{staticClass:"profile clearfix",attrs:{padding:20,"dis-hover":""}},[a("div",{staticClass:"avatar-box"},[a("img",{attrs:{src:t.avatar}})]),a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{color:"#aaa"}},[t._v("We use "),a("a",{attrs:{href:"https://cravatar.cn/",target:"_blank"}},[t._v("Gravatar")]),t._v(" to present your avatar icon")])])]),a("Card",{staticClass:"profile clearfix",staticStyle:{margin:"20px 0"},attrs:{padding:20,"dis-hover":""}},[a("List",t._l(t.THIRD_PARTY_ENUM,(function(e){return a("ListItem",{key:e},[a("ListItemMeta",{attrs:{title:e,description:t.THIRD_PARTY_CAS[e].description}}),t.THIRD_PARTY_CAS[e].getId(t.profile)?a("template",{slot:"action"},[a("li",[a("span",[t._v(t._s(t.THIRD_PARTY_CAS[e].getId(t.profile)))])]),a("li",[t.thirdPartyStatus[e]?t._e():a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.handleUnbind(e)}}},[t._v("Unbind")])])]):a("template",{slot:"action"},[a("li",[t._v("NONE")])])],2)})),1)],1)],1)],1),a("Reconfirm",{ref:"reconfirm",attrs:{message:"Are you sure to unbind this third party certification?","confirm-text":t.confirmText,"button-text":"I confirm to unbind"},on:{"update:confirmText":function(e){t.confirmText=e},"update:confirm-text":function(e){t.confirmText=e}}})],1)},o=[],s=(a("d3b7"),a("5530")),n=a("2f62"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:"Your Profile",padding:0,"dis-hover":""}},[a("div",{staticClass:"form"},[a("Form",{ref:"profileForm",attrs:{model:t.profileForm,rules:t.profileRules,"label-position":"right"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"Username"}},[a("span",[t._v(t._s(t.profile.username))])]),a("FormItem",{attrs:{label:"Nickname"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"text"},model:{value:t.profileForm.nickname,callback:function(e){t.$set(t.profileForm,"nickname",e)},expression:"profileForm.nickname"}})],1),a("FormItem",{attrs:{label:"Student ID"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"text"},model:{value:t.profileForm.studentId,callback:function(e){t.$set(t.profileForm,"studentId",e)},expression:"profileForm.studentId"}})],1),a("FormItem",[a("Button",{attrs:{loading:t.btnLoading},on:{click:t.handleProfileUpdate}},[t._v("Update")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"Gender"}},[a("RadioGroup",{attrs:{border:""},model:{value:t.profileForm.gender,callback:function(e){t.$set(t.profileForm,"gender",e)},expression:"profileForm.gender"}},[a("Radio",{attrs:{label:"2"}},[a("Icon",{attrs:{type:"md-help"}})],1),a("Radio",{attrs:{label:"1"}},[a("Icon",{attrs:{type:"md-male"}})],1),a("Radio",{attrs:{label:"0"}},[a("Icon",{attrs:{type:"md-female"}})],1)],1)],1),a("FormItem",{attrs:{label:"Phone"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"text"},model:{value:t.profileForm.phone,callback:function(e){t.$set(t.profileForm,"phone",e)},expression:"profileForm.phone"}})],1),a("FormItem",{attrs:{label:"Email"}},[a("span",{domProps:{textContent:t._s(t.profile.email)}})]),a("FormItem",{attrs:{label:"Roles"}},t._l(t.profile.roles,(function(e){return a("span",{key:e,staticClass:"roles"},[a("Tag",{attrs:{color:t.USER_ROLE[e].color}},[t._v(t._s(e))])],1)})),0)],1)],1)],1)],1)])},l=[],c=(a("25f0"),a("7c15")),d=a("c9d9"),m={data:function(){return{profileForm:{nickname:"",studentId:"",gender:"",phone:"",password:""},profileRules:{password:[{required:!0,trigger:"blur",min:6,max:32}]},btnLoading:!1}},methods:{handleProfileUpdate:function(){var t=this;this.$refs.profileForm.validate((function(e){e&&(t.btnLoading=!0,c["a"].updateProfile(t.profileForm).then((function(e){c["a"].getProfile(),t.$Message.success("Profile Updated")})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnLoading=!1})))}))}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(n["d"])("user",["profile"])),Object(n["c"])("user",["username"])),{},{USER_ROLE:function(){return d["j"]}}),mounted:function(){var t=this;c["a"].getProfile((function(e){t.profileForm=Object.assign({},e),t.profileForm.gender=t.profileForm.gender.toString()}))}},u=m,f=(a("d978"),a("2877")),p=Object(f["a"])(u,i,l,!1,null,"9c8371a8",null),w=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:"Change Your Password",padding:0,"dis-hover":""}},[a("div",{staticClass:"form"},[a("Form",{ref:"passwordForm",attrs:{model:t.passwordForm,rules:t.passwordRules,"label-position":"top"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"Old Password",prop:"oldPassword"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"password"},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}})],1),a("FormItem",[a("Button",{attrs:{loading:t.btnLoading},on:{click:function(e){return t.handlePasswordUpdate("passwordForm")}}},[t._v("Update")])],1)],1),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"New Password",prop:"newPassword"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"password"},model:{value:t.passwordForm.newPassword,callback:function(e){t.$set(t.passwordForm,"newPassword",e)},expression:"passwordForm.newPassword"}})],1),a("FormItem",{attrs:{label:"Confirm New Password",prop:"confirmNewPassword"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"password"},model:{value:t.passwordForm.confirmNewPassword,callback:function(e){t.$set(t.passwordForm,"confirmNewPassword",e)},expression:"passwordForm.confirmNewPassword"}})],1)],1)],1)],1)],1)])},g=[],b={data:function(){var t=this,e=function(e,a,r){""!==a&&t.$refs.passwordForm.validateField("confirmNewPassword"),r()},a=function(e,a,r){a!==t.passwordForm.newPassword&&r(new Error("Password does not match")),r()};return{passwordForm:{oldPassword:"",newPassword:"",confirmNewPassword:""},passwordRules:{oldPassword:[{required:!0,trigger:"blur",min:6,max:32}],newPassword:[{required:!0,trigger:"blur",min:6,max:32},{validator:e,trigger:"blur"}],confirmNewPassword:[{required:!0,validator:a,trigger:"change"}]},btnLoading:!1}},methods:{handlePasswordUpdate:function(t){var e=this;this.$refs[t].validate((function(a){if(a){var r={password:e.passwordForm.oldPassword,newPassword:e.passwordForm.newPassword};e.btnLoading=!0,c["a"].updateProfile(r).then((function(t){e.$Message.success("Updated")})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.btnLoading=!1,e.$refs[t].resetFields()}))}}))}}},v=b,F=(a("7dde"),Object(f["a"])(v,h,g,!1,null,"5efa0aee",null)),P=F.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{title:"Change Your Email",padding:0,"dis-hover":""}},[a("div",{staticClass:"form"},[a("Form",{ref:"emailForm",attrs:{model:t.emailForm,rules:t.emailRules,"label-position":"top"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"Password",prop:"password"}},[a("Input",{staticStyle:{width:"280px"},attrs:{type:"password"},model:{value:t.emailForm.password,callback:function(e){t.$set(t.emailForm,"password",e)},expression:"emailForm.password"}})],1),a("FormItem",[a("Button",{attrs:{loading:t.btnLoading},on:{click:t.handleEmailUpdate}},[t._v("Update")])],1)],1),a("Col",{attrs:{span:"12"}},[a("EmailVerify",{attrs:{email:t.emailForm.email,"email-code":t.emailForm.emailCode,"email-label":"New Email"},on:{"update:email":function(e){return t.$set(t.emailForm,"email",e)},"update:emailCode":function(e){return t.$set(t.emailForm,"emailCode",e)},"update:email-code":function(e){return t.$set(t.emailForm,"emailCode",e)}}},[a("template",{slot:"email-tip"},[a("span",{staticStyle:{color:"#aaa"}},[t._v("Your email will be used at "),a("a",{attrs:{href:"https://cravatar.cn/",target:"_blank"}},[t._v("Gravatar")])])])],2)],1)],1)],1)],1)])},x=[],_=a("5eb8"),S={components:{EmailVerify:_["a"]},data:function(){var t=function(t,e,a){c["a"].isExist({email:e}).then((function(t){a()}),(function(t){a(new Error("already exists"))}))};return{emailForm:{password:"",email:"",emailCode:""},emailRules:{password:[{required:!0,trigger:"blur",min:6,max:32}],email:[{required:!0,type:"email",trigger:"blur"},{validator:t,trigger:"blur"}]},btnLoading:!1}},methods:{handleEmailUpdate:function(){var t=this;this.$refs.emailForm.validate((function(e){e&&(t.btnLoading=!0,c["a"].updateEmail(t.emailForm).then((function(e){c["a"].getProfile(),t.$Message.success("Updated"),t.$refs.emailForm.resetFields()})).catch((function(e){t.$Message.error(e.message)})).finally((function(){t.btnLoading=!1})))}))}}},C=S,I=(a("a5bf"),Object(f["a"])(C,y,x,!1,null,"48869bee",null)),R=I.exports,k=a("7b4f"),U=a("3abf"),$={components:{UserProfile:w,UserPassword:P,UserEmail:R,Reconfirm:k["a"]},inject:["reload"],data:function(){return{thirdPartyStatus:{},confirmText:""}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(n["d"])("user",["profile"])),Object(n["c"])("user",["avatar","isVerified"])),{},{THIRD_PARTY_CAS:function(){return U["a"]},THIRD_PARTY_ENUM:function(){return U["b"]}}),methods:{handleUnbind:function(t){var e=this;this.confirmText=U["a"][t].getId(this.profile),this.$refs.reconfirm.reconfirm((function(){e.thirdPartyStatus[t]=!0,c["a"].thirdPartyUnbinding({thirdParty:t}).then((function(t){e.$Message.success("Success"),e.reload()})).catch((function(t){e.$Message.error(t.message)})).finally((function(){e.thirdPartyStatus[t]=!1}))}))}},mounted:function(){for(var t in U["b"])this.$set(this.thirdPartyStatus,t,!1)}},T=$,E=(a("0994"),Object(f["a"])(T,r,o,!1,null,"6598ab99",null));e["default"]=E.exports},1099:function(t,e,a){},"10c7":function(t,e,a){"use strict";var r=a("1099"),o=a.n(r);o.a},13678:function(t,e,a){},"1cda":function(t,e,a){},"3abf":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}));a("99af"),a("d3b7");var r=a("ade3"),o=a("7c15"),s="/thirdPartyLogin?thirdParty=",n={SDUCAS:"SDUCAS"},i=Object(r["a"])({},n.SDUCAS,{name:"SDUCAS",description:"Shandong University Central Authentication Service",targetUrl:function(t){var e="https://pass.sdu.edu.cn/cas/login?service=".concat(location.origin).concat(s).concat(n.SDUCAS);for(var a in t)e+="&".concat(a,"=").concat(t[a]);return e},certificate:function(t){return new Promise((function(e,a){o["a"].thirdPartyLogin(t).then((function(t){e(t)})).catch(a)}))},render:function(t,e){var a="".concat(e.sduRealName,"(").concat(e.sduId,") has passed SDU CAS certification"),r="Please complete the following information",o=t("div",{class:{center:!0},style:{color:"#000000A6"}},a),s=t("div",{class:{center:!0},style:{color:"#000000A6"}},r);return t("div",[o,s])},getId:function(t){return t.sduId}})},"7b4f":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:t.title,witdh:"446px",transfer:""},model:{value:t.modalFlag,callback:function(e){t.modalFlag=e},expression:"modalFlag"}},[a("div",{staticClass:"warnDiv"},[a("div",{domProps:{innerHTML:t._s(t.message)}})]),a("div",{staticClass:"confirmText",staticStyle:{"margin-top":"36px"}},[a("div",[a("span",[t._v("Please type ")]),a("strong",[t._v(t._s(t.confirmText))]),a("span",[t._v(" to confirm.")])]),a("Input",{staticStyle:{width:"100%"},on:{"on-change":t.checkTypein},model:{value:t.typein,callback:function(e){t.typein=e},expression:"typein"}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticClass:"confirmButton",attrs:{long:"",type:"error",disabled:!t.checked},on:{click:t.callback}},[t._v(t._s(t.buttonText))])],1)])},o=[],s=function(){},n={name:"Reconfirm",props:{title:{type:String,default:"Reconfirm"},message:{type:String,default:""},confirmText:{type:String,default:""},buttonText:{type:String,default:"Confirm"}},data:function(){return{modalFlag:!1,typein:"",checked:!1,callback:s}},methods:{reconfirm:function(t){this.callback=t,this.typein="",this.modalFlag=!0},checkTypein:function(){this.checked=this.typein===this.confirmText}}},i=n,l=(a("10c7"),a("2877")),c=Object(l["a"])(i,r,o,!1,null,"c3322122",null);e["a"]=c.exports},"7dde":function(t,e,a){"use strict";var r=a("13678"),o=a.n(r);o.a},a5bf:function(t,e,a){"use strict";var r=a("1cda"),o=a.n(r);o.a},a831:function(t,e,a){},d978:function(t,e,a){"use strict";var r=a("a831"),o=a.n(r);o.a},fd68:function(t,e,a){}}]);
//# sourceMappingURL=chunk-957290ae.1338530f.js.map