(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1df4f71b"],{1348:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.apply?r("div",{staticClass:"box clearfix"},[t._m(0),r("div",{staticClass:"body"},[r("Form",{ref:"registerForm",attrs:{model:t.registerForm,rules:t.registerRules,"label-position":"right","label-width":150,"label-colon":""}},[r("FormItem",{attrs:{prop:"username",label:"Username"}},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"This will be your login handler"},model:{value:t.registerForm.username,callback:function(e){t.$set(t.registerForm,"username",e)},expression:"registerForm.username"}})],1),r("FormItem",{attrs:{prop:"email",label:"Email"}},[r("Input",{staticStyle:{width:"220px"},attrs:{type:"email"},model:{value:t.registerForm.email,callback:function(e){t.$set(t.registerForm,"email",e)},expression:"registerForm.email"}})],1),r("FormItem",{attrs:{prop:"password",label:"Password"}},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"At least 6 characters",type:"password"},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),r("FormItem",{attrs:{prop:"confirmPassword",label:"Confirm Password"}},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"Be same as your password",type:"password"},model:{value:t.registerForm.confirmPassword,callback:function(e){t.$set(t.registerForm,"confirmPassword",e)},expression:"registerForm.confirmPassword"}})],1),r("FormItem",{attrs:{label:"Student ID"}},[r("Input",{staticStyle:{width:"220px"},model:{value:t.registerForm.studentId,callback:function(e){t.$set(t.registerForm,"studentId",e)},expression:"registerForm.studentId"}})],1),r("FormItem",{attrs:{prop:"captcha",label:"Captcha"}},[r("div",{staticClass:"captcha-code"},[r("Input",{staticStyle:{width:"220px"},attrs:{placeholder:"Click to get captcha"},on:{"on-focus":t.onCaptchaInputFocus},model:{value:t.registerForm.captcha,callback:function(e){t.$set(t.registerForm,"captcha",e)},expression:"registerForm.captcha"}})],1),r("div",{staticClass:"captcha-img"},[r("Tooltip",{attrs:{content:"Click to refresh",placement:"right"}},[r("img",{attrs:{src:t.captchaImg},on:{click:t.getCaptcha}})])],1)])],1)],1),r("div",{staticClass:"bottom"},[r("div",{staticClass:"btns"},[r("a",{attrs:{href:"/#/login"}},[t._v("Already registerd?")]),r("Button",{attrs:{type:"text",loading:t.btnRegisterLoading},on:{click:function(e){return t.handleRegister("registerForm")}}},[t._v("Register")])],1)])]):r("div",{staticClass:"container activation hover"},[r("Tooltip",{attrs:{content:"Return to Home",placement:"bottom"}},[r("Icon",{attrs:{type:"md-checkmark-circle-outline",size:"30"}}),r("h1",{staticStyle:{display:"inline"},on:{click:function(e){return t.$router.replace({name:"home"})}}},[t._v(" You have activated")])],1)],1)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title"},[r("span",[t._v("Register in SDUOJ")])])}],i=(r("d3b7"),r("7c15")),o={data:function(){var t=this,e=function(t,e,r){i["a"].isExist({username:e}).then((function(t){r()}),(function(t){r(new Error("already exists"))}))},r=function(t,e,r){i["a"].isExist({email:e}).then((function(t){r()}),(function(t){r(new Error("already exists"))}))},a=function(e,r,a){""!==r&&t.$refs.registerForm.validateField("confirmPassword"),a()},s=function(e,r,a){r!==t.registerForm.password&&a(new Error("Password does not match")),a()};return{registerForm:{username:"",email:"",password:"",confirmPassword:"",studentId:"",captcha:""},registerRules:{username:[{required:!0,trigger:"blur"},{validator:e,trigger:"blur"}],email:[{required:!0,type:"email",trigger:"blur"},{validator:r,trigger:"blur"}],password:[{required:!0,trigger:"blur",min:6,max:32},{validator:a,trigger:"blur"}],confirmPassword:[{required:!0,validator:s,trigger:"change"}],captcha:[{required:!0,trigger:"blur",min:1,max:10}]},captchaId:0,captchaImg:"",btnRegisterLoading:!1,apply:!0}},methods:{getCaptcha:function(){var t=this;i["a"].getCaptcha().then((function(e){t.captchaId=e.captchaId,t.captchaImg=e.captcha}))},onCaptchaInputFocus:function(){this.captchaId||this.getCaptcha()},handleRegister:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var r=Object.assign({},e.registerForm);return delete r.confirmPassword,r.captchaId=e.captchaId,e.btnRegisterLoading=!0,void i["a"].register(r).then((function(t){e.$Message.success("Success, check your email for activation"),e.btnRegisterLoading=!1})).catch((function(t){e.$Message.error(t.message),e.btnRegisterLoading=!1})).finally((function(){e.registerForm.captcha="",e.registerForm.confirmPassword="",e.getCaptcha()}))}e.registerForm.captcha="",e.registerForm.confirmPassword=""}))}},mounted:function(){var t=this;this.$route.query.token&&(this.apply=!1,i["a"].verifyEmail(this.$route.query.token).catch((function(e){t.$Message.error(e.data),t.apply=!0})))}},c=o,n=(r("a517"),r("2877")),l=Object(n["a"])(c,a,s,!1,null,"2e615104",null);e["default"]=l.exports},a517:function(t,e,r){"use strict";var a=r("bcb3"),s=r.n(a);s.a},bcb3:function(t,e,r){}}]);
//# sourceMappingURL=chunk-1df4f71b.2d9605e3.js.map