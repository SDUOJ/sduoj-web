{"version":3,"sources":["webpack:///./src/views/contest/ContestListView.vue?0529","webpack:///src/views/contest/ContestListView.vue","webpack:///./src/views/contest/ContestListView.vue?512a","webpack:///./src/views/contest/ContestListView.vue","webpack:///./src/views/contest/ContestListView.vue?95c2","webpack:///./src/components/contest/ContestList.vue?a5ad","webpack:///./src/components/contest/ContestList.vue?e5be","webpack:///src/components/contest/ContestList.vue","webpack:///./src/components/contest/ContestList.vue?daf4","webpack:///./src/components/contest/ContestList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","mygroups","length","attrs","model","value","callback","$$v","groupId","expression","_l","group","key","_e","staticStyle","ref","total","pageNow","pageSize","pageSizeOpts","on","$event","onPageChange","onPageSizeChange","toContestDetail","upcomingContest","contestId","_v","_s","contestTitle","countdown","staticRenderFns","getGroupIdFromStorage","localStorage","getItem","STORAGE_KEY","undefined","setGroupIdToStorage","setItem","mixins","components","data","selectContestMode","computed","CONTEST_MODE","startTime","now","duration","weeks","humanize","get","$route","query","set","$router","push","methods","getMyGroupList","api","showErrMessage","getContestList","$refs","contestList","mode","getParticipatedContests","catch","getUpcomingContest","watch","mounted","component","contest","slot","participatedContest","includes","_f","gmtStart","name","params","scopedSlots","_u","fn","href","navigate","features","openness","CONTEST_OPENNESS","PRIVATE","PROTECTED","gmtEnd","participantNum","$store","state","isPublic","spinShow","filters","timeformat","timestamp","parseInt","time2hour","contestStatus","contestStartTime","Promise","CONTEST_STATUS"],"mappings":"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","file":"js/chunk-1265279a.3a295fb6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.mygroups.length > 0)?_c('Tabs',{attrs:{\"animated\":false,\"type\":\"card\"},model:{value:(_vm.groupId),callback:function ($$v) {_vm.groupId=$$v},expression:\"groupId\"}},[_c('TabPane',{attrs:{\"name\":\"all\",\"label\":\"All\"}}),_vm._l((_vm.mygroups),function(group){return _c('TabPane',{key:group.groupId,attrs:{\"name\":group.groupId,\"label\":((group.groupId) + \": \" + (group.title))}})})],2):_vm._e(),_c('Row',[_c('Col',{attrs:{\"span\":\"18\"}},[_c('div',{staticStyle:{\"margin-right\":\"20px\"}},[_c('Card',{attrs:{\"title\":\"实验列表\",\"padding\":0,\"dis-hover\":\"\"}},[(false)?_c('Select',{staticStyle:{\"width\":\"100px\"},attrs:{\"slot\":\"extra\",\"size\":\"small\"},slot:\"extra\",model:{value:(_vm.selectContestMode),callback:function ($$v) {_vm.selectContestMode=$$v},expression:\"selectContestMode\"}},[_c('Option',{attrs:{\"value\":\"all\",\"label\":\"All\"}}),_vm._l((_vm.CONTEST_MODE),function(mode){return _c('Option',{key:mode,attrs:{\"value\":mode,\"label\":mode.toUpperCase(),\"w\":\"\"}})})],2):_vm._e(),_c('ContestList',{ref:\"contestList\"}),_c('div',{staticClass:\"float-right footer-pages\"},[_c('Page',{attrs:{\"size\":\"small\",\"show-elevator\":\"\",\"show-sizer\":\"\",\"total\":_vm.total,\"current\":_vm.pageNow,\"page-size\":_vm.pageSize,\"page-size-opts\":_vm.pageSizeOpts},on:{\"update:current\":function($event){_vm.pageNow=$event},\"on-change\":_vm.onPageChange,\"on-page-size-change\":_vm.onPageSizeChange}})],1)],1)],1)]),_c('Col',{attrs:{\"span\":\"6\"}},[(_vm.upcomingContest)?_c('Card',{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{\"title\":\"Upcoming\",\"padding\":0,\"dis-hover\":\"\"}},[_c('div',{staticClass:\"upcoming-title\",on:{\"click\":function($event){return _vm.toContestDetail(_vm.upcomingContest.contestId)}}},[_vm._v(\" \"+_vm._s(_vm.upcomingContest.contestTitle)+\" \")]),_c('div',{staticClass:\"upcoming-countdown\"},[_c('span',[_vm._v(_vm._s(_vm.countdown))])])]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2022 the original author or authors.\n\n   Licensed under the Affero General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/agpl-3.0.en.html\n -->\n\n<template>\n  <div class=\"container\">\n    <Tabs v-if=\"mygroups.length > 0\" v-model=\"groupId\" :animated=\"false\" type=\"card\">\n      <TabPane name=\"all\" label=\"All\" />\n      <TabPane v-for=\"group in mygroups\" :key=\"group.groupId\" :name=\"group.groupId\" :label=\"`${group.groupId}: ${group.title}`\" />\n    </Tabs>\n    <Row>\n      <Col span=\"18\">\n        <div style=\"margin-right: 20px\">\n          <Card title=\"实验列表\" :padding=\"0\" dis-hover>\n            <Select v-if=\"false\" size=\"small\" v-model=\"selectContestMode\" style=\"width: 100px\" slot=\"extra\">\n              <Option value=\"all\" label=\"All\" />\n              <Option v-for=\"mode in CONTEST_MODE\" :key=\"mode\" :value=\"mode\" :label=\"mode.toUpperCase()\"w />\n            </Select>\n            <ContestList ref=\"contestList\"/>\n            <div class=\"float-right footer-pages\">\n              <Page\n                size=\"small\" show-elevator show-sizer\n                :total=\"total\"\n                :current.sync=\"pageNow\"\n                :page-size=\"pageSize\"\n                :page-size-opts=\"pageSizeOpts\"\n                @on-change=\"onPageChange\"\n                @on-page-size-change=\"onPageSizeChange\"/>\n            </div>\n          </Card>\n        </div>\n      </Col>\n      <Col span=\"6\">\n        <Card\n          style=\"margin-bottom: 30px\"\n          title=\"Upcoming\"\n          :padding=\"0\"\n          dis-hover\n          v-if=\"upcomingContest\">\n          <div class=\"upcoming-title\" @click=\"toContestDetail(upcomingContest.contestId)\">\n            {{ upcomingContest.contestTitle }}\n          </div>\n          <div class=\"upcoming-countdown\"><span>{{ countdown }}</span>\n          </div>\n        </Card>\n        <!--      <Card title=\"My participation\" :padding=\"0\" dis-hover>-->\n        <!--      </Card>-->\n      </Col>\n    </Row>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { mapState } from 'vuex';\nimport { s2hs } from '_u/transform';\nimport api from '_u/api';\nimport { CONTEST_MODE } from '_u/constants';\n\nimport { Page } from '_c/mixins';\nimport ContestList from '_c/contest/ContestList';\n\nconst STORAGE_KEY = 'contest#groupId';\n\nfunction getGroupIdFromStorage() {\n  return localStorage.getItem(STORAGE_KEY) || undefined;\n}\n\nfunction setGroupIdToStorage(groupId) {\n  localStorage.setItem(STORAGE_KEY, groupId);\n}\n\nexport default {\n  mixins: [Page],\n  components: { ContestList },\n  data: function () {\n    return {\n      mygroups: [],\n      upcomingContest: {},\n      selectContestMode: 'all'\n    }\n  },\n  computed: {\n    ...mapState(['now']),\n    CONTEST_MODE: () => CONTEST_MODE,\n    countdown: function () {\n      const startTime = moment(new Date(parseInt(this.upcomingContest.gmtStart)));\n      if (startTime > this.now) {\n        const duration = moment.duration(startTime.diff(this.now, 'seconds'), 'seconds');\n        if (duration.weeks() > 0) {\n          return duration.humanize();\n        } else {\n          return s2hs(startTime - this.now);\n        }\n      }\n      return '\\b';\n    },\n    groupId: {\n      get: function () {\n        return this.$route.query.groupId || getGroupIdFromStorage() || 'all';\n      },\n      set: function (groupId) {\n        setGroupIdToStorage(groupId);\n        let query;\n        if (this.$route.query.groupId === groupId ||\n            (this.$route.query.groupId === undefined && groupId === 'all')) {\n          query = this.$route.query;\n        } else {\n          query = {\n            groupId: groupId === 'all' ? undefined : groupId\n          };\n        }\n        this.$router.push({ query });\n      }\n    }\n  },\n  methods: {\n    getMyGroupList: function (showErrMessage = true) {\n      api.getMyGroupList().then(ret => {\n        this.mygroups = ret;\n      }).catch(err => {\n        if (showErrMessage) {\n          this.$Message.error(err.message);\n        }\n      });\n    },\n    getContestList: function (groupId, showErrMessage = true) {\n      this.$refs.contestList.getContestList({\n        pageNow: this.pageNow,\n        pageSize: this.pageSize,\n        mode: this.selectContestMode === 'all' ? '' : this.selectContestMode,\n        groupId: groupId === 'all' ? undefined : groupId\n      }).then(ret => {\n        this.total = parseInt(ret.totalPage) * this.pageSize;\n      }).catch(err => {\n        if (showErrMessage) {\n          this.$Message.error(err.message);\n        }\n      });\n\n      this.$refs.contestList.getParticipatedContests().catch(err => {\n        if (showErrMessage) {\n          this.$Message.error(err.message);\n        }\n      });\n    },\n    getUpcomingContest: function (groupId, showErrMessage = true) {\n      api.getUpcomingContest({\n        groupId: groupId === 'all' ? undefined : groupId\n      }).then(ret => {\n        this.upcomingContest = ret;\n      }).catch(err => {\n        if (showErrMessage) {\n          this.$Message.error(err.message);\n        }\n      });\n    }\n  },\n  watch: {\n    selectContestMode: function () {\n      this.getContestList(this.groupId);\n    },\n    $route: function () {\n      this.getContestList(this.groupId);\n      this.getUpcomingContest(this.groupId);\n    }\n  },\n  mounted: function () {\n    this.getMyGroupList(false);\n    this.getContestList(this.groupId, false);\n    this.getUpcomingContest(this.groupId, false);\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.upcoming-title {\n  margin: 10px 0;\n  font-size: 20px;\n  line-height: 24px;\n  color: #0000cc;\n  text-decoration: underline;\n  text-align: center;\n}\n\n.upcoming-title:hover {\n  cursor: pointer;\n}\n\n.upcoming-countdown {\n  margin: 10px 0;\n  text-align: center;\n\n  span {\n    color: rgba(0, 0, 0, 0.85);\n    font-size: 20px;\n    font-weight: bold;\n    line-height: 24px;\n  }\n}\n\n.pages {\n  float: right;\n  margin: 20px auto;\n  padding-right: 15px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContestListView.vue?vue&type=template&id=3503a530&scoped=true&\"\nimport script from \"./ContestListView.vue?vue&type=script&lang=js&\"\nexport * from \"./ContestListView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContestListView.vue?vue&type=style&index=0&id=3503a530&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3503a530\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=style&index=0&id=3503a530&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestListView.vue?vue&type=style&index=0&id=3503a530&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=style&index=0&id=57b4bbaa&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--14-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=style&index=0&id=57b4bbaa&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.spinShow)?_c('div',{staticClass:\"spin-container center\"},[_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}})],1):_c('div',[_c('List',{attrs:{\"size\":\"large\",\"item-layout\":\"vertical\"}},_vm._l((_vm.contestList),function(contest){return _c('ListItem',{key:contest.contestId},[_c('div',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"slot\":\"extra\"},slot:\"extra\"},[(_vm.participatedContest.includes(contest.contestId))?_c('div',{staticStyle:{\"color\":\"#5cb85c\"}},[_c('Icon',{attrs:{\"type\":\"md-checkmark\"}}),_c('strong',[_vm._v(\" Participated\")])],1):_vm._e()]),_c('ListItemMeta',[_c('div',{staticClass:\"contest__date numbox\",attrs:{\"slot\":\"avatar\"},slot:\"avatar\"},[_c('div',{staticClass:\"numbox__num__large\"},[_vm._v(_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'DD')))]),_c('div',{staticClass:\"numbox__text\"},[_vm._v(_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'yyyy-MM')))])]),_c('div',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('router-link',{attrs:{\"to\":{\n              name: 'contest-detail',\n              params: { contestId: contest.contestId }\n            },\"custom\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n            var href = ref.href;\n            var navigate = ref.navigate;\nreturn [_c('a',{staticClass:\"contest__title\",attrs:{\"href\":href},on:{\"click\":navigate}},[_vm._v(_vm._s(contest.contestTitle))])]}}],null,true)}),(contest.features.openness === _vm.CONTEST_OPENNESS.PRIVATE)?[(_vm.participatedContest.includes(contest.contestId))?_c('Icon',{attrs:{\"type\":\"ios-unlock\",\"color\":\"#d9534f\",\"size\":\"19\"}}):_c('Icon',{attrs:{\"type\":\"md-lock\",\"color\":\"#d9534f\",\"size\":\"19\"}})]:(contest.features.openness === _vm.CONTEST_OPENNESS.PROTECTED)?[(_vm.participatedContest.includes(contest.contestId))?_c('Icon',{attrs:{\"type\":\"ios-unlock\",\"color\":\"orange\",\"size\":\"19\"}}):_c('Icon',{attrs:{\"type\":\"md-lock\",\"color\":\"orange\",\"size\":\"19\"}})]:_vm._e()],2),_c('ul',{staticClass:\"ivu-list-item-action\",attrs:{\"slot\":\"description\"},slot:\"description\"},[(false)?_c('li',[_c('div',{class:(\"contest-type--\" + (contest.features.mode))},[_c('Icon',{attrs:{\"type\":\"md-bulb\",\"color\":\"#fff\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(contest.features.mode.toUpperCase()))])],1)]):_vm._e(),_c('li',[_vm._v(\" \"+_vm._s(_vm._f(\"timeformat\")(contest.gmtStart,'HH:mm:ss'))+\" \")]),_c('li',[_c('Icon',{attrs:{\"type\":\"ios-time-outline\"}}),_vm._v(\" \"+_vm._s(_vm._f(\"time2hour\")((contest.gmtEnd - contest.gmtStart)))+\" \")],1),_c('li',[_c('Icon',{attrs:{\"type\":\"ios-people-outline\"}}),_vm._v(\" \"+_vm._s(contest.participantNum)+\" \")],1),_c('li',[(_vm.$store.state.now > contest.gmtEnd)?_c('Tag',{attrs:{\"color\":\"green\"}},[_vm._v(\"Finished\")]):(contest.gmtStart < _vm.$store.state.now && _vm.$store.state.now < contest.gmtEnd)?_c('Tag',{attrs:{\"color\":\"gold\"}},[_vm._v(\"Running\")]):_vm._e(),(contest.isPublic === 0)?_c('Tag',{attrs:{\"color\":\"red\"}},[_vm._v(\"Private\")]):_vm._e()],1)])])],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n   Copyright 2020-2022 the original author or authors.\n\n   Licensed under the Affero General Public License, Version 3.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n        https://www.gnu.org/licenses/agpl-3.0.en.html\n -->\n\n<template>\n  <div class=\"spin-container center\" v-if=\"spinShow\">\n    <Spin size=\"large\" fix />\n  </div>\n  <div v-else>\n    <List size=\"large\" item-layout=\"vertical\">\n      <ListItem v-for=\"contest in contestList\" :key=\"contest.contestId\">\n        <div slot=\"extra\" style=\"margin-right: 10px\">\n          <div v-if=\"participatedContest.includes(contest.contestId)\" style=\"color: #5cb85c\">\n            <Icon type=\"md-checkmark\"/>\n            <strong>&nbsp;Participated</strong>\n          </div>\n        </div>\n        <ListItemMeta>\n          <div slot=\"avatar\" class=\"contest__date numbox\">\n            <div class=\"numbox__num__large\">{{ contest.gmtStart | timeformat('DD') }}</div>\n            <div class=\"numbox__text\">{{ contest.gmtStart | timeformat('yyyy-MM') }}</div>\n          </div>\n          <div slot=\"title\">\n            <router-link\n              :to=\"{\n                name: 'contest-detail',\n                params: { contestId: contest.contestId }\n              }\"\n              v-slot=\"{ href, navigate }\"\n              custom\n            >\n              <a :href=\"href\" @click=\"navigate\" class=\"contest__title\">{{ contest.contestTitle }}</a>\n            </router-link>\n            <template v-if=\"contest.features.openness === CONTEST_OPENNESS.PRIVATE\">\n              <Icon type=\"ios-unlock\" color=\"#d9534f\" size=\"19\" v-if=\"participatedContest.includes(contest.contestId)\"/>\n              <Icon type=\"md-lock\" color=\"#d9534f\" size=\"19\" v-else/>\n            </template>\n            <template v-else-if=\"contest.features.openness === CONTEST_OPENNESS.PROTECTED\">\n              <Icon type=\"ios-unlock\" color=\"orange\" size=\"19\" v-if=\"participatedContest.includes(contest.contestId)\"/>\n              <Icon type=\"md-lock\" color=\"orange\" size=\"19\" v-else/>\n            </template>\n          </div>\n          <ul slot=\"description\" class=\"ivu-list-item-action\">\n            <li v-if=\"false\">\n              <div :class=\"`contest-type--${contest.features.mode}`\">\n                <Icon type=\"md-bulb\" color=\"#fff\"/>&nbsp;\n                <span>{{ contest.features.mode.toUpperCase() }}</span>\n              </div>\n            </li>\n            <li>\n              {{ contest.gmtStart | timeformat('HH:mm:ss') }}\n            </li>\n            <li>\n              <Icon type=\"ios-time-outline\"/>\n              {{ (contest.gmtEnd - contest.gmtStart) | time2hour }}\n            </li>\n            <li>\n              <Icon type=\"ios-people-outline\"/>\n              {{ contest.participantNum }}\n            </li>\n            <li>\n              <Tag v-if=\"$store.state.now > contest.gmtEnd\" color=\"green\">Finished</Tag>\n              <Tag v-else-if=\"contest.gmtStart < $store.state.now && $store.state.now < contest.gmtEnd\" color=\"gold\">Running</Tag>\n              <Tag v-if=\"contest.isPublic === 0\" color=\"red\">Private</Tag>\n            </li>\n          </ul>\n        </ListItemMeta>\n      </ListItem>\n    </List>\n  </div>\n</template>\n\n<script>\nimport moment from 'moment';\nimport { CONTEST_OPENNESS, CONTEST_MODE, CONTEST_STATUS } from '_u/constants';\nimport { s2hs } from '_u/transform';\nimport api from '_u/api';\n\nexport default {\n  name: 'ContestList',\n  data: function () {\n    return {\n      contestList: [],\n      participatedContest: [],\n      spinShow: false\n    }\n  },\n  filters: {\n    timeformat: (timestamp, format) => {\n      if (typeof (timestamp) === 'string') {\n        timestamp = parseInt(timestamp);\n      }\n      return moment(new Date(timestamp)).format(format);\n    },\n    time2hour: timediff => s2hs(timediff),\n    contestStatus: contest => {\n      const now = this.$store.store.now;\n      if (contest.contestStartTime > now) {\n        return CONTEST_STATUS.UPCOMING;\n      } else if (contest.contestEndTime < now) {\n        return CONTEST_STATUS.FINISHED;\n      } else {\n        return CONTEST_STATUS.RUNNING;\n      }\n    }\n  },\n  methods: {\n    toContestDetail: function (contestId) {\n      this.$router.push({\n        name: 'contest-detail',\n        params: { contestId }\n      });\n    },\n    getContestList: function (params) {\n      return new Promise((resolve, reject) => {\n        this.spinShow = true;\n        api.getContestList(params)\n          .then(ret => {\n            this.contestList = ret.rows;\n            resolve(ret);\n          })\n          .catch(reject)\n          .finally(() => {\n            this.spinShow = false;\n          });\n      });\n    },\n    getParticipatedContests: function () {\n      return new Promise((resolve, reject) => {\n        api.getParticipatedContests()\n          .then(ret => {\n            this.participatedContest = ret;\n            resolve(ret);\n          })\n          .catch(reject);\n      });\n    }\n  },\n  computed: {\n    CONTEST_OPENNESS: () => CONTEST_OPENNESS,\n    CONTEST_MODE: () => CONTEST_MODE,\n    CONTEST_STATUS: () => CONTEST_STATUS\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n// Number Box Object\n.numbox {\n  font-size: 16px;\n  text-align: center;\n}\n\n.numbox__num__large {\n  font-size: 1.7rem;\n}\n\n.numbox__text {\n  font-size: 14px;\n  color: #AAA;\n}\n\n/deep/ .ivu-list-item {\n  padding: 10px 0;\n}\n\n/deep/ .ivu-list-vertical {\n  .ivu-list-item-meta {\n    margin-bottom: 0;\n  }\n\n  .ivu-list-item-action {\n    margin-top: 6px;\n  }\n\n  .ivu-list-item-meta-title {\n    margin-bottom: 4px;\n    margin-top: 4px;\n  }\n}\n\n/deep/ .ivu-list-item-meta-avatar {\n  margin-top: -2px;\n}\n.contest__title {\n  color: rgba(0, 0, 0, 0.85);\n  &:hover {\n    text-decoration: underline;\n  }\n}\n\n.contest__date {\n  margin: 0 10px 0 15px;\n  white-space: nowrap;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContestList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContestList.vue?vue&type=template&id=57b4bbaa&scoped=true&\"\nimport script from \"./ContestList.vue?vue&type=script&lang=js&\"\nexport * from \"./ContestList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContestList.vue?vue&type=style&index=0&id=57b4bbaa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57b4bbaa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}