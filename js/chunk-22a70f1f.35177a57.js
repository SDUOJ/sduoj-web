(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22a70f1f"],{"0b55":function(t,e,s){"use strict";var i=s("69bc"),o=s.n(i);o.a},2815:function(t,e,s){},"294d":function(t,e,s){"use strict";var i=s("2815"),o=s.n(i);o.a},3452:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.spinShow?s("Spin",{attrs:{size:"large",fix:""}}):t._e(),s("Row",[s("Col",{attrs:{span:"17"}},[s("div",{staticStyle:{"margin-right":"20px"}},[s("Card",{staticClass:"box",attrs:{"dis-hover":"",padding:0}},[s("JudgeResult",{staticClass:"title",attrs:{slot:"title",result:t.submission.judgeResult,total:t.submission.checkpointNum,current:t.judgedCheckpointNum},slot:"title"}),t.showCheckpointResults?s("Table",{staticClass:"data-table",attrs:{"disabled-hover":"","no-data-text":"",size:"small",columns:t.columns,data:t.submission.checkpointResults},scopedSlots:t._u([{key:"judge-result",fn:function(t){var e=t.row;return[s("JudgeResult",{attrs:{result:e.judgeResult}})]}},{key:"time",fn:function(e){var i=e.row;return[s("span",{staticClass:"time"},[t._v(t._s(i.usedTime))])]}},{key:"mem",fn:function(e){var i=e.row;return[s("span",{staticClass:"mem"},[t._v(t._s(i.usedMemory))])]}}],null,!1,1916629984)}):t._e()],1),t.showJudgeLog?s("Card",{staticClass:"box",attrs:{title:"Judge Log","dis-hover":""}},[s("div",{staticClass:"judge-log"},[t._v(t._s(t.submission.judgeLog))])]):t._e(),t.showCode?s("Card",{staticClass:"box",attrs:{title:"Your Code",icon:"md-code","dis-hover":"",padding:0}},[s("p",{attrs:{slot:"title"},slot:"title"},[t.submission.code?s("Tooltip",{attrs:{content:"copy",placement:"right"}},[s("Icon",{staticClass:"hover",attrs:{type:"md-copy"},on:{click:function(e){return t.copyToClipboard(t.submission.code)}}})],1):t._e()],1),t.submission.code?s("p",{staticStyle:{color:"#bbb"},attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(t.submission.codeLength)+" B")]):t.submission.zipFileId?s("Button",{attrs:{slot:"extra",type:"info",size:"small",target:"_blank",to:t.downloadUrl},slot:"extra"},[t._v("Download Your Code")]):t._e(),t.submission.code?s("div",{directives:[{name:"highlight-linenumber",rawName:"v-highlight-linenumber",value:t.submission.code,expression:"submission.code"}]},[s("pre",[s("code")])]):t._e()],1):t._e()],1)]),s("Col",{attrs:{span:"7"}},[s("Card",{attrs:{title:"Submission",icon:"ios-options","dis-hover":"",padding:0}},[s("CellGroup",{on:{"on-click":t.onCellClick}},[s("div",{staticStyle:{"margin-top":"24px"}},[t.canDoRejudge?s("Cell",{attrs:{name:"rejudge",disabled:t.submission.judgeResult<0}},[s("strong",[t._v("Rejudge")]),s("Icon",{attrs:{slot:"icon",type:"md-refresh",color:"#2d8cf0"},slot:"icon"})],1):t._e(),t.canDoInvalidate?s("Cell",{attrs:{name:"invalidate",disabled:t.submission.judgeResult<0}},[s("strong",[t._v("Invalidate")]),s("Icon",{attrs:{slot:"icon",type:"md-close-circle",color:"#d9534f"},slot:"icon"})],1):t._e(),s("Divider",{attrs:{size:"small"}}),t.contestId?[s("Cell",{ref:"contest_cell",attrs:{title:"Contest",to:{name:"contest-overview",params:{contestId:t.contestId}}}},[s("span",{staticClass:"ellipsis",style:"width: "+t.getEllipsisWidth("contest_cell")+"px",attrs:{slot:"extra"},slot:"extra"},[t._v(" "+t._s(t.$store.state.contest.contest.contestTitle)+" ")])]),s("Cell",{attrs:{title:"Problem Code",extra:t._f("contestProblemId")(t.submission.problemCode),to:{name:"contest-problem",params:{problemCode:t.submission.problemCode}}}})]:[t._e()],s("Cell",{ref:"problem_title_cell",attrs:{title:"",to:{name:"problem-detail",params:{problemCode:t.submission.problemCode}}}},[s("span",{staticClass:"ellipsis",style:"width: "+t.getEllipsisWidth("problem_title_cell")+"px",attrs:{slot:"extra"},slot:"extra"},[t._v(" "+t._s(t.submission.problemTitle)+" ")])])],2),s("Divider",{attrs:{size:"small"}}),s("div",{staticStyle:{"margin-bottom":"24px"}},[s("Cell",{attrs:{title:"Submission ID",extra:t.submission.submissionId}}),s("Cell",{attrs:{title:"Create Time"}},[s("Time",{attrs:{slot:"extra",time:t._f("parseInt")(t.submission.gmtCreate),type:"datetime"},slot:"extra"})],1),s("Cell",{attrs:{title:"Judge Time"}},[s("Time",{attrs:{slot:"extra",time:t._f("parseInt")(t.submission.gmtModified),type:"datetime"},slot:"extra"})],1),s("Cell",{attrs:{title:"User",extra:t.submission.username}}),s("Cell",{attrs:{title:"Judge Result"}},[s("JudgeResult",{attrs:{slot:"extra",result:t.submission.judgeResult},slot:"extra"})],1),t.submission.judgeScore?s("Cell",{attrs:{title:"Score"}},[s("span",{attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(t.submission.judgeScore||0))])]):t._e(),t.canDoRejudge?s("Cell",{attrs:{title:"Judge Template",extra:t.submission.judgeTemplateTitle}}):t._e()],1)],1)],1)],1)],1)],1)},o=[],n=(s("99af"),s("4de4"),s("4160"),s("a434"),s("d3b7"),s("25f0"),s("159b"),s("2909")),r=s("5530"),u=s("5645"),l=s("8035"),a=s("e325"),c=s("2f62"),d=s("7c15"),m=s("bedf"),b=s("c9d9"),p={components:{JudgeResult:l["a"],ProblemCode:u["a"]},mixins:[a["b"]],inject:["reload"],data:function(){return{submission:{checkpointResults:[]},columns:[{title:"#",key:"id"},{title:"Result",minWidth:50,slot:"judge-result"},{title:"Score",key:"judgeScore"},{title:"Time",slot:"time"},{title:"Memory",slot:"mem"}],spinShow:!1}},filters:{parseInt:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return parseInt(t)})),contestProblemId:function(t){return Object(m["b"])(t)}},methods:{getEllipsisWidth:function(t){var e=this.$refs[t];return e?e.$el.clientWidth-48:200},copyToClipboard:function(t){var e=this;this.$copyText(t).then((function(t){return e.$Message.success("已复制到剪切板")}))},gotoProblem:function(t){this.$router.push({name:"problem-detail",params:{problemCode:t}})},wsSuccess:function(t){"string"===typeof t&&(t=JSON.parse(t));for(var e=0;e<t.length;++e){if(!Array.isArray(t[e])){this.fillCheckpointResults(t);break}this.fillCheckpointResults(t[e])}},fillCheckpointResults:function(t){var e=this;if(t[1]<b["e"].PD)switch(t[1]){case b["e"].CP:this.$set(this.submission,"judgeResult",b["e"].CP);break;case b["e"].JG:this.submission.checkpointResults.forEach((function(t){e.$set(t,"judgeResult",b["e"].JG)})),this.$set(this.submission,"judgeResult",b["e"].JG);break;case b["e"].END:this.websock.close(),this.submission=Object(r["a"])(Object(r["a"])({},this.submission),{},{judgeResult:t[2],judgeScore:t[3],usedTime:t[4].toString(),usedMemory:t[5].toString()}),this.getSubmissionDetail(this.submission.submissionId);break}else this.submission.checkpointResults.splice(t[1],1,{id:t[1]+1,judgeResult:t[2],judgeScore:t[3],usedTime:t[4].toString(),usedMemory:t[5].toString()})},getSubmissionDetail:function(t){var e=this;d["a"].getSubmissionDetail({submissionId:t}).then((function(t){if(e.submission=Object(r["a"])({},t),e.submission.checkpointResults&&e.submission.checkpointResults.forEach((function(s,i){e.fillCheckpointResults([t.submissionId,i].concat(Object(n["a"])(s)))})),e.showCode){if(e.contestId){var s=e.contest.features[e.contestStatus===b["c"].RUNNING?"contestRunning":"contestEnd"],i=s.displayCheckpointResult;if(!i)return}if(t.judgeResult<=0){for(var o=0;o<t.checkpointNum;++o)e.submission.checkpointResults.push({id:o+1,judgeResult:t.judgeResult,judgeScore:0,usedTime:0,usedMemory:0});e.initWebSocket("/submission",[e.submission.submissionId],e.wsSuccess,(function(){console.log("ws onerror"),this.reconnect()}),(function(){console.log("ws close")}))}}})).finally((function(){e.spinShow=!1}))},onCellClick:function(t){var e=this;this.submission.judgeResult<0||("rejudge"===t?d["a"].rejudge([this.submission.submissionId]).then((function(t){e.reload()})).catch((function(t){e.$Message.error(t.message)})):"invalidate"===t&&d["a"].invalidate({submissionId:this.submission.submissionId,contestId:this.contestId}).then((function(t){e.getSubmissionDetail(e.submission.submissionId)})).catch((function(t){e.$Message.error(t.message)})))},query:function(t){t&&(this.spinShow=!0,this.getSubmissionDetail(t))}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])("user",["username","isAdmin","isLogin"])),Object(c["c"])("contest",["contestId"])),Object(c["d"])("contest",["contest"])),{},{showCode:function(){return!!this.submission.code||!!this.submission.zipFileId},showJudgeLog:function(){return!!this.submission.judgeLog},showCheckpointResults:function(){return void 0!==this.submission.checkpointResults&&null!==this.submission.checkpointResults&&0!==this.submission.checkpointResults.length&&(this.submission.judgeResult!==b["e"].CAN&&(this.submission.judgeResult>0?!(this.submission.judgeResult===b["e"].CE||this.submission.judgeResult===b["e"].SE):this.submission.judgeResult===b["e"].JG))},canDoRejudge:function(){return this.isAdmin||this.contestId&&this.isLogin&&this.username===this.contest.username},canDoInvalidate:function(){return this.isAdmin||this.contestId&&this.isLogin&&this.username===this.contest.username},judgedCheckpointNum:function(){return this.submission.checkpointResults?this.submission.checkpointResults.filter((function(t){return t.judgeResult>b["e"].PD})).length:0},downloadUrl:function(){return"".concat("","/api/filesys/download/").concat(this.submission.zipFileId,"/source")}}),mounted:function(){this.query(this.$route.params.submissionId)},watch:{$route:function(){this.query(this.$route.params.submissionId)}}},h=p,f=(s("80c8"),s("0b55"),s("2877")),g=Object(f["a"])(h,i,o,!1,null,"543a5467",null);e["default"]=g.exports},5645:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("strong",[t._v(t._s(t.oj))]),t._v("-"+t._s(t.code)+" ")])},o=[],n=(s("baa5"),{name:"ProblemCode",props:{problemCode:{type:String,default:"-"}},computed:{oj:function(){return this.problemCode.substring(0,this.problemCode.lastIndexOf("-"))},code:function(){return this.problemCode.substring(this.problemCode.lastIndexOf("-")+1)}}}),r=n,u=s("2877"),l=Object(u["a"])(r,i,o,!1,null,"62d51bc1",null);e["a"]=l.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),o=s("5899"),n="["+o+"]",r=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),l=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(r,"")),2&t&&(s=s.replace(u,"")),s}};t.exports={start:l(1),end:l(2),trim:l(3)}},"69bc":function(t,e,s){},7156:function(t,e,s){var i=s("861d"),o=s("d2bb");t.exports=function(t,e,s){var n,r;return o&&"function"==typeof(n=e.constructor)&&n!==s&&i(r=n.prototype)&&r!==s.prototype&&o(t,r),t}},8035:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return null!==t.result?s("div",{staticClass:"judge-result"},[s("Icon",{attrs:{type:t.judgeResult.icon,color:t.judgeResult.color}}),s("span",{class:t.judgeResult.css+" hover"},[t._v(t._s(t.abbr?t.judgeResult.abbr:t.judgeResult.name))]),t.result===t.JUDGE_RESULT_TYPE.JG&&t.total>0?[s("span",{class:t.judgeResult.css+" hover"},[t._v(t._s(" ("+t.current+"/"+t.total+")"))])]:t._e()],2):t._e()},o=[],n=(s("a9e3"),s("c9d9")),r={props:{result:{type:Number,default:null},abbr:{type:Boolean,default:!1},total:{type:Number,default:0},current:{type:Number,default:0}},computed:{judgeResult:function(){return n["d"][this.result]},JUDGE_RESULT_TYPE:function(){return n["e"]}}},u=r,l=(s("294d"),s("2877")),a=Object(l["a"])(u,i,o,!1,null,"763b1cba",null);e["a"]=a.exports},"80c8":function(t,e,s){"use strict";var i=s("d978"),o=s.n(i);o.a},a9e3:function(t,e,s){"use strict";var i=s("83ab"),o=s("da84"),n=s("94ca"),r=s("6eeb"),u=s("5135"),l=s("c6b6"),a=s("7156"),c=s("c04e"),d=s("d039"),m=s("7c73"),b=s("241c").f,p=s("06cf").f,h=s("9bf2").f,f=s("58a8").trim,g="Number",C=o[g],v=C.prototype,_=l(m(v))==g,j=function(t){var e,s,i,o,n,r,u,l,a=c(t,!1);if("string"==typeof a&&a.length>2)if(a=f(a),e=a.charCodeAt(0),43===e||45===e){if(s=a.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(a.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+a}for(n=a.slice(2),r=n.length,u=0;u<r;u++)if(l=n.charCodeAt(u),l<48||l>o)return NaN;return parseInt(n,i)}return+a};if(n(g,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var R,I=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof I&&(_?d((function(){v.valueOf.call(s)})):l(s)!=g)?a(new C(j(e)),s,I):j(e)},x=i?b(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;x.length>y;y++)u(C,R=x[y])&&!u(I,R)&&h(I,R,p(C,R));I.prototype=v,v.constructor=I,r(o,g,I)}},baa5:function(t,e,s){var i=s("23e7"),o=s("e58c");i({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},d978:function(t,e,s){},e58c:function(t,e,s){"use strict";var i=s("fc6a"),o=s("a691"),n=s("50c4"),r=s("a640"),u=s("ae40"),l=Math.min,a=[].lastIndexOf,c=!!a&&1/[1].lastIndexOf(1,-0)<0,d=r("lastIndexOf"),m=u("indexOf",{ACCESSORS:!0,1:0}),b=c||!d||!m;t.exports=b?function(t){if(c)return a.apply(this,arguments)||0;var e=i(this),s=n(e.length),r=s-1;for(arguments.length>1&&(r=l(r,o(arguments[1]))),r<0&&(r=s+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:a}}]);
//# sourceMappingURL=chunk-22a70f1f.35177a57.js.map